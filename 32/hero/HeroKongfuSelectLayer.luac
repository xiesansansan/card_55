slot0 = class("HeroKongfuSelectLayer", require("common.BaseLayer"), function ()
	return UIWrap.newRootLayer({
		fullScreen = true,
		color = cc.c4b(0, 0, 0, 144)
	})
end)
slot0.uiTree = {
	{
		name = "untitled46",
		cType = "Sprite",
		params = {
			isFullScale = true,
			scaleApt = 2,
			posApt = 1,
			image = "bp_70.png",
			pos = {
				x = 568,
				y = 320
			}
		},
		children = {}
	},
	{
		name = "untitled39",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			zOrder = 2,
			pos = {
				x = 568,
				y = 0
			}
		},
		children = {
			{
				name = "jibanTishi",
				cType = "Label",
				params = {
					text = "111",
					emptyInit = true,
					zOrder = 1,
					color = {
						g = 255,
						r = 255,
						b = 255
					},
					outlineColor = {
						g = 37,
						r = 37,
						b = 37
					},
					pos = {
						x = 0,
						y = 18
					}
				},
				children = {}
			},
			{
				name = "untitled47",
				cType = "Scale9Sprite",
				params = {
					image = "tc_2.png",
					pos = {
						x = -0.39,
						y = 294
					},
					size = {
						width = 970,
						height = 560
					}
				},
				children = {
					{
						name = "untitled3",
						cType = "Scale9Sprite",
						params = {
							image = "c_pure.png",
							anchor = {
								x = 0.5,
								y = 0
							},
							pos = {
								x = 716.84,
								y = 31.41
							},
							size = {
								width = 460,
								height = 500
							}
						},
						children = {
							{
								name = "untitled12",
								cType = "Scale9Sprite",
								params = {
									image = "grxx_1.png",
									capInsets = {
										x = 262,
										height = 1,
										width = 1,
										y = 111
									},
									pos = {
										x = 230,
										y = 240.34
									},
									size = {
										width = 460,
										height = 440
									}
								},
								children = {}
							},
							{
								name = "listView",
								cType = "ListView",
								params = {
									bounce = true,
									direction = true,
									pos = {
										x = 8.42,
										y = 33.24
									},
									size = {
										width = 440,
										height = 410
									}
								},
								children = {
									{
										name = "shengongLayout",
										cType = "Layout",
										custom = {
											{
												value = "untitled19-clickAction",
												name = "clickAction",
												type = "string"
											},
											{
												value = "untitled18-text",
												name = "name",
												type = "string"
											},
											{
												value = "untitled17-text",
												name = "quality",
												type = "string"
											},
											{
												value = "untitled24-initParams",
												name = "cardInfo",
												type = "string"
											},
											{
												value = "untitled31-text",
												name = "owner",
												type = "string"
											},
											{
												value = "untitled19-titleText",
												name = "titleText",
												type = "string"
											},
											{
												value = "untitled19-image",
												name = "buttonImage",
												type = "string"
											}
										},
										params = {
											pos = {
												z = 0,
												x = 4.74,
												y = 478.85
											},
											size = {
												width = 440,
												height = 120
											}
										},
										children = {
											{
												name = "untitled15",
												cType = "Scale9Sprite",
												params = {
													image = "c_97.png",
													pos = {
														x = 220,
														y = 60
													},
													size = {
														width = 440,
														height = 120
													}
												},
												children = {
													{
														name = "untitled18",
														cType = "Label",
														params = {
															isRichText = true,
															anchor = {
																x = 0,
																y = 0.5
															},
															color = {
																g = 37,
																r = 37,
																b = 37
															},
															pos = {
																x = 127.88,
																y = 84.2
															},
															text = TR("道具名字")
														},
														children = {}
													},
													{
														name = "untitled17",
														cType = "Label",
														params = {
															isRichText = true,
															anchor = {
																x = 0,
																y = 0.5
															},
															color = {
																g = 37,
																r = 37,
																b = 37
															},
															pos = {
																x = 127.88,
																y = 45
															},
															text = TR("道具名字")
														},
														children = {}
													},
													{
														name = "untitled19",
														cType = "Button",
														params = {
															clickAction = "onCloseLayer",
															image = "c_27.png",
															pos = {
																x = 359.62,
																y = 42.82
															},
															size = {
																width = 105,
																height = 46
															},
															titleText = TR("选  择")
														},
														children = {}
													},
													{
														name = "untitled24",
														cType = "CardNode",
														params = {
															allowClick = true,
															initParams = {},
															pos = {
																x = 58,
																y = 60
															}
														},
														children = {}
													},
													{
														name = "untitled31",
														cType = "Label",
														params = {
															fontSize = 20,
															text = "Label",
															anchor = {
																x = 1,
																y = 0.5
															},
															color = {
																g = 125,
																r = 203,
																b = 69
															},
															pos = {
																x = 426.26,
																y = 99.37
															}
														},
														children = {}
													},
													{
														name = "jihuoBg",
														cType = "Sprite",
														params = {
															image = "c_88.png",
															hide = true,
															pos = {
																x = 29.15,
																y = 89.84
															}
														},
														children = {
															{
																name = "untitled38",
																cType = "Label",
																params = {
																	fontSize = 17,
																	rotationAngle = -43,
																	color = {
																		g = 199,
																		r = 223,
																		b = 42
																	},
																	pos = {
																		x = 20,
																		y = 38
																	},
																	text = TR("可激活")
																},
																children = {}
															}
														}
													}
												}
											}
										}
									}
								}
							},
							{
								name = "emptyList",
								cType = "Sprite",
								params = {
									image = "bp_25.png",
									hide = true,
									pos = {
										x = 228.87,
										y = 281.17
									}
								},
								children = {
									{
										name = "untitled35",
										cType = "Label",
										params = {
											align = 1,
											color = {
												g = 37,
												r = 37,
												b = 37
											},
											pos = {
												x = 231.44,
												y = 52.94
											},
											size = {
												width = 260,
												height = 100
											},
											text = TR("大侠，您还没有任何招式")
										},
										children = {}
									}
								}
							}
						}
					},
					{
						name = "untitled55",
						cType = "Scale9Sprite",
						params = {
							image = "tc_4.png",
							pos = {
								x = 485,
								y = 539.5
							},
							size = {
								width = 373,
								height = 62
							}
						},
						children = {
							{
								name = "stepSprite",
								cType = "Sprite",
								params = {
									image = "xksg_8.png",
									hide = true,
									anchor = {
										x = 0,
										y = 0.5
									},
									pos = {
										x = 154.93,
										y = 15.05
									}
								},
								children = {}
							},
							{
								name = "stepLabel",
								cType = "Label",
								params = {
									text = "0",
									hide = true,
									startChar = 48,
									fontName = "xksg_9.png",
									pos = {
										x = 184,
										y = 15.34
									}
								},
								children = {}
							},
							{
								name = "nameSprite",
								cType = "Sprite",
								params = {
									image = "kf_name_0019.png",
									pos = {
										x = 186.5,
										y = 52
									}
								},
								children = {}
							}
						}
					},
					{
						name = "untitled58",
						cType = "Scale9Sprite",
						params = {
							image = "grxx_1.png",
							anchor = {
								x = 0.5,
								y = 0
							},
							capInsets = {
								x = 262,
								height = 1,
								width = 1,
								y = 111
							},
							pos = {
								x = 252.42,
								y = 31.95
							},
							size = {
								width = 460,
								height = 370
							}
						},
						children = {
							{
								name = "untitled9",
								cType = "Label",
								params = {
									anchor = {
										x = 0,
										y = 0.5
									},
									color = {
										g = 248,
										r = 255,
										b = 232
									},
									outlineColor = {
										g = 42,
										r = 51,
										b = 24
									},
									pos = {
										x = 697.19,
										y = 483
									},
									text = TR("隐藏已上阵的招式")
								},
								children = {}
							},
							{
								name = "untitled8",
								cType = "Checkbox",
								params = {
									isSelect = true,
									selectImage = "c_44.png",
									callback = "onCheckAction",
									normalImage = "c_43.png",
									pos = {
										x = 671,
										y = 484.01
									}
								},
								children = {}
							},
							{
								name = "infoBg",
								cType = "Scale9Sprite",
								params = {
									image = "c_pure.png",
									pos = {
										x = 218,
										y = 424.22
									},
									size = {
										width = 420,
										height = 100
									}
								},
								children = {
									{
										name = "skillLogo",
										cType = "Sprite",
										params = {
											zOrder = 1,
											image = "c_25.png",
											pos = {
												x = 41.8,
												y = 52.68
											}
										},
										children = {
											{
												name = "untitled45",
												cType = "Sprite",
												params = {
													image = "sk_100001.png",
													childName = "skillImage",
													scale = 0.95,
													pos = {
														x = 39,
														y = 39
													}
												},
												children = {}
											},
											{
												name = "jihuotishi",
												cType = "Label",
												params = {
													hide = true,
													zOrder = 1,
													color = {
														g = 255,
														r = 255,
														b = 255
													},
													outlineColor = {
														g = 37,
														r = 37,
														b = 37
													},
													pos = {
														x = 40.63,
														y = 42.26
													},
													text = TR("未激活")
												},
												children = {}
											},
											{
												name = "untitled44",
												cType = "Sprite",
												params = {
													image = "xksg_15.png",
													pos = {
														x = 9.26,
														y = 64.91
													}
												},
												children = {}
											}
										}
									},
									{
										name = "skillScrollview",
										cType = "ScrollView",
										params = {
											bounce = true,
											direction = 1,
											conSize = {
												width = 320,
												height = 1000
											},
											pos = {
												x = 94.36,
												y = -1.12
											},
											size = {
												width = 340,
												height = 100
											}
										},
										children = {
											{
												name = "skilldes",
												cType = "Label",
												params = {
													text = "",
													align = 0,
													isRichText = true,
													valign = 0,
													anchor = {
														x = 0,
														y = 1
													},
													color = {
														g = 37,
														r = 37,
														b = 37
													},
													pos = {
														x = 0,
														y = 1000
													},
													size = {
														width = 320,
														height = 0
													}
												},
												children = {}
											}
										}
									}
								}
							},
							{
								name = "baseInfoScroll",
								cType = "ScrollView",
								params = {
									direction = 1,
									bounce = true,
									anchor = {
										x = 0.5,
										y = 1
									},
									pos = {
										x = 225.81,
										y = 345
									},
									size = {
										width = 440,
										height = 330
									}
								},
								children = {
									{
										name = "templateKongfuTitleCell",
										cType = "TemplateNode",
										params = {
											pos = {
												x = 0,
												y = 98.5
											},
											size = {
												width = 440,
												height = 140
											}
										},
										children = {
											{
												name = "untitled61",
												cType = "Label",
												params = {
													fontSize = 26,
													color = {
														g = 37,
														r = 37,
														b = 37
													},
													pos = {
														x = 220,
														y = 112
													},
													text = TR("基础属性")
												},
												children = {
													{
														name = "untitled62",
														cType = "Sprite",
														params = {
															image = "c_36.png",
															reverse = 1,
															anchor = {
																x = 0,
																y = 0.5
															},
															pos = {
																x = 270.68,
																y = 15
															}
														},
														children = {}
													},
													{
														name = "untitled63",
														cType = "Sprite",
														params = {
															image = "c_36.png",
															anchor = {
																x = 1,
																y = 0.5
															},
															pos = {
																x = -6.39,
																y = 15
															}
														},
														children = {}
													}
												}
											}
										}
									},
									{
										name = "templateKongfuDesCell",
										cType = "TemplateNode",
										custom = {
											{
												value = "untitled68-text",
												name = "desLabel",
												type = "string"
											}
										},
										params = {
											pos = {
												x = 0,
												y = -1
											},
											size = {
												width = 440,
												height = 190
											}
										},
										children = {
											{
												name = "untitled65",
												cType = "Label",
												params = {
													fontSize = 26,
													color = {
														g = 37,
														r = 37,
														b = 37
													},
													pos = {
														x = 220,
														y = 145
													},
													text = TR("招式简介")
												},
												children = {
													{
														name = "untitled66",
														cType = "Sprite",
														params = {
															image = "c_36.png",
															reverse = 1,
															anchor = {
																x = 0,
																y = 0.5
															},
															pos = {
																x = 271.76,
																y = 15.01
															}
														},
														children = {}
													},
													{
														name = "untitled67",
														cType = "Sprite",
														params = {
															image = "c_36.png",
															anchor = {
																x = 1,
																y = 0.5
															},
															pos = {
																x = -6.16,
																y = 15.39
															}
														},
														children = {}
													}
												}
											},
											{
												name = "untitled68",
												cType = "Label",
												params = {
													fontSize = 18,
													text = "kongfuDes",
													align = 0,
													valign = 0,
													anchor = {
														x = 0,
														y = 1
													},
													color = {
														g = 37,
														r = 37,
														b = 37
													},
													pos = {
														x = 10,
														y = 131.89
													},
													size = {
														width = 420,
														height = 110
													}
												},
												children = {}
											}
										}
									},
									{
										name = "templateKongfuStepCell",
										cType = "TemplateNode",
										params = {
											pos = {
												x = -1,
												y = 69.22
											},
											size = {
												width = 440,
												height = 250
											}
										},
										children = {
											{
												name = "untitled70",
												cType = "Label",
												params = {
													fontSize = 26,
													color = {
														g = 37,
														r = 37,
														b = 37
													},
													pos = {
														x = 220,
														y = 220
													},
													text = TR("升重天赋")
												},
												children = {
													{
														name = "untitled71",
														cType = "Sprite",
														params = {
															image = "c_36.png",
															reverse = 1,
															anchor = {
																x = 0,
																y = 0.5
															},
															pos = {
																x = 271.52,
																y = 15
															}
														},
														children = {}
													},
													{
														name = "untitled72",
														cType = "Sprite",
														params = {
															image = "c_36.png",
															anchor = {
																x = 1,
																y = 0.5
															},
															pos = {
																x = -6.63,
																y = 15
															}
														},
														children = {}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	},
	{
		name = "mLeftNode",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			zOrder = 9,
			pos = {
				x = 0,
				y = 0
			}
		},
		children = {}
	},
	{
		name = "rule",
		cType = "Button",
		params = {
			clickAction = "onRuleAction",
			scaleApt = 2,
			zOrder = 10,
			posApt = 1,
			image = "c_3.png",
			pos = {
				x = 222,
				y = 615
			}
		},
		children = {}
	},
	{
		name = "untitled51",
		cType = "Button",
		params = {
			clickAction = "onCloseLayer",
			posApt = 1,
			scaleApt = 2,
			zOrder = 9,
			image = "c_1.png",
			anchor = {
				x = 0,
				y = 0.5
			},
			pos = {
				x = 0,
				y = 615
			}
		},
		children = {}
	},
	{
		name = "untitled52",
		cType = "Sprite",
		params = {
			scaleApt = 2,
			zOrder = 10,
			posApt = 1,
			image = "xksg_20.png",
			anchor = {
				x = 0,
				y = 1
			},
			pos = {
				x = 92,
				y = 640
			}
		},
		children = {}
	},
	{
		name = "untitled54",
		cType = "TopResourceNode",
		params = {
			scaleApt = 2,
			zOrder = 10,
			posApt = 1,
			anchor = {
				x = 1,
				y = 1
			},
			moduleIdList = {
				1111,
				1112,
				1114
			},
			pos = {
				x = 1136,
				y = 640
			}
		},
		children = {}
	},
	{
		name = "mRightNode",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			zOrder = 9,
			pos = {
				x = 1136,
				y = 0
			}
		},
		children = {}
	},
	{
		name = "untitled73",
		cType = "Button",
		params = {
			clickAction = "onGotoGetWays",
			posApt = 1,
			scaleApt = 2,
			zOrder = 9,
			image = "tb_gn_72.png",
			anchor = {
				x = 0,
				y = 1
			},
			pos = {
				x = 1039.95,
				y = 125.12
			}
		},
		children = {}
	}
}
slot1 = require("common.ShaderManager")
slot0.ctor = function (slot0, slot1)
	slot0.mHeroModelId = slot1 and slot1.heroModelId
	slot0.mCallBack = slot1 and slot1.callBack

	slot0.super.ctor(slot0, {
		swallow = true
	})
	slot0.initUI(slot0)

	return 
end
slot0.initUI = function (slot0)
	slot0.createUITree(slot0)
	slot0.refreshJibanKongfu(slot0)
	slot0.refreshListView(slot0, KongfuObj:getUnbattaleKongfuList())

	return 
end
slot0.onCloseLayer = function (slot0)
	LayerManager.removeLayer(slot0)

	return 
end
slot0.onGoget = function (slot0)
	LayerManager.showModuleLayer(ModuleSub.eShengyuanWars)

	return 
end
slot0.refreshJibanKongfu = function (slot0)
	if NewKongfuSkillRelation.items[slot0.mHeroModelId] and NewKongfuSkillRelation.items[slot0.mHeroModelId][Utility.getKongfuIdByHeroId(slot0.mHeroModelId)] then
		slot0.skillLogo.skillImage:setTexture(SkillModel.items[HeroModel.items[slot0.mHeroModelId].skillAttackId].skillPic .. ".png")
		slot0.skilldes:setString(Resource.getSkillIntroStr(slot4, slot8, HeroObj:getItem(slot0.mHeroModelId).Star, "#252525", "#8BA857", {
			kongfuRatio = slot1[0].skillRatio
		}))
		slot0.skillScrollview:setInnerContainerSize(cc.size(320, (slot0.skilldes:getContentSize().height < 100 and 100) or slot0.skilldes:getContentSize().height))
		slot0.skilldes:setPositionY((slot0.skilldes:getContentSize().height < 100 and 100) or slot0.skilldes:getContentSize().height)
		slot0.refreshBaseInfoView(slot0, NewKongfuModel.items[slot1[0].needKongFu])
		slot0.nameSprite:setTexture(NewKongfuModel.items[slot1[0].needKongFu].namePic .. ".png")

		if KongfuObj:getKuangfuInfoByHeroModelID(slot0.mHeroModelId) then
			if slot9.ModelId == slot5.modelId then
				slot0.skillLogo.skillImage:setTexture(slot6.skillPic .. ".png")
				slot0.skilldes:setString(Resource.getSkillIntroStr(slot4, slot11, HeroObj:getHeroByKFEntityId(slot9.EntityId).Star, "#252525", "#8BA857", {
					kongfuRatio = slot1[slot9.Step].skillRatio
				}))
				slot0.skillScrollview:setInnerContainerSize(cc.size(320, (slot0.skilldes:getContentSize().height < 100 and 100) or slot0.skilldes:getContentSize().height))
				slot0.skilldes:setPositionY((slot0.skilldes:getContentSize().height < 100 and 100) or slot0.skilldes:getContentSize().height)
				slot0.stepLabel:setVisible(0 < slot9.Step)
				slot0.stepSprite:setVisible(0 < slot9.Step)

				if 0 < slot9.Step then
					slot12 = slot0.nameSprite:getContentSize()

					slot0.stepLabel:setString(slot9.Step)
				end
			else
				slot0.jibanTishi:setString(string.format("招式技生效需要装备%s", slot5.name))
				slot0.skillLogo.skillImage:setGLProgram(slot10)
				slot0.jihuotishi:setVisible(true)
			end
		else
			slot0.skillLogo.skillImage:setGLProgram(slot10)
			slot0.jibanTishi:setString(string.format("招式技生效需要装备%s", slot5.name))
			slot0.jihuotishi:setVisible(true)
		end
	else
		slot0.infoBg:setVisible(false)
		slot0.jibanTishi:setString("")
		slot0.jibanTishi:setString("当前侠客没有招式技")
		slot0.jibanTishi:setPositionY(200)

		slot2 = UIWrap.newControl("Sprite", {
			image = "c_118.png"
		})

		slot2.setPosition(slot2, 220, 200)
		slot0.topBg:addChild(slot2)
	end

	return 
end
slot0.refreshBaseInfoView = function (slot0, slot1)
	slot0.baseInfoScroll:removeAllChildren()

	slot2 = {}

	table.insert(slot3, {
		height = 140,
		node = slot0.createLayoutTemplateNode(slot0, "templateKongfuTitleCell", {})
	})

	for slot9, slot10 in ipairs(slot5) do
		slot12 = string.split(slot10, "|")[2]*NewKongfuStepRelation.items[slot1.stepClassID][0].attrUpR

		if Utility.isAttrNeedPercent(tonumber(string.split(slot10, "|")[1])) then
			slot12 = slot12/100 .. "%"
		end

		slot4.addChild(slot4, UIWrap.newControl("Label", {
			fontSize = 20,
			isRichText = true,
			text = TR("#252525%s+%s", FightAttrTypeName[tonumber(slot11[1])], slot12),
			pos = cc.p((slot9 - 1)*150 + 60, 55)
		}))
	end

	table.insert(slot3, {
		height = 240,
		node = slot0.createLayoutTemplateNode(slot0, "templateKongfuStepCell", {})
	})

	slot7 = -40

	for slot12 = 1, #NewKongfuStepRelation.items[slot1.stepClassID], 1 do
		if slot8[slot12].attrStr ~= "" then
			slot14 = nil
			slot14 = (slot12 ~= 3 or TR("第%d重 精通", slot12)) and (slot12 ~= 5 or TR("第%d重 圆满", slot12)) and TR("第%d重", slot12)

			slot6.addChild(slot6, slot15)
			slot6.addChild(slot6, UIWrap.newControl("Label", {
				fontSize = 20,
				text = Utility.analysisStrAttrToFromat(slot13.attrStr, "%s+%s", "  "),
				anchor = cc.p(0, 0.5),
				color = cc.c3b(95, 95, 95),
				pos = cc.p(slot7 + 230, slot12*35 - 215)
			}))

			if slot12 == 3 or slot12 == 5 then
				slot19 = UIWrap.newControl("Sprite", {
					image = (slot12 == 5 and "xksg_13.png") or "xksg_14.png"
				})

				slot19.setPosition(slot19, slot7 + 92, slot12*35 - 215)
				slot6.addChild(slot6, slot19)

				slot20 = UIWrap.newControl("Button", {
					image = "c_3.png",
					scale = 0.9,
					clickAction = function ()
						slot1 = NewKongfuModel.items[NewKongfuSkillRelation.items[slot0.mHeroModelId] and NewKongfuSkillRelation.items[slot0.mHeroModelId][Utility.getKongfuIdByHeroId(slot0.mHeroModelId)][0].needKongFu]

						if NewKongfuSkillRelation.items[slot0.mHeroModelId] and NewKongfuSkillRelation.items[slot0.mHeroModelId][Utility.getKongfuIdByHeroId(slot0.mHeroModelId)].mHeroModelId then
							LayerManager.addLayer({
								cleanUp = false,
								name = "hero.HeroKongFuUpPreviewLayer",
								popRestore = true,
								data = {
									step = -1,
									heroModelId = slot0.mHeroModelId,
									kongfuId = slot1.modelId
								},
								zOrder = Enums.ZOrderType.ePopLayer
							})
						else
							ui.showFlashView(TR("未装备侠客"))
						end

						return 
					end
				})

				slot20.setPosition(slot20, slot7 + 50, slot12*35 - 215)
				slot6.addChild(slot6, slot20)
			end

			slot17.setColor(slot17, cc.c3b(37, 37, 37))
			slot15.setColor(slot15, cc.c3b(37, 37, 37))
		end
	end

	table.insert(slot3, {
		height = 160,
		node = slot0.createLayoutTemplateNode(slot0, "templateKongfuDesCell", {
			desLabel = slot1.intro
		})
	})

	slot10 = 0

	for slot14, slot15 in ipairs(slot3) do
		slot10 = slot10 + slot15.height
	end

	if slot10 < 340 then
		slot10 = 340
	end

	slot0.baseInfoScroll:setInnerContainerSize(cc.size(440, slot10))

	slot11 = slot10

	for slot15, slot16 in ipairs(slot3) do
		slot16.node:setIgnoreAnchorPointForPosition(false)
		slot16.node:setAnchorPoint(cc.p(0, 0))
		slot16.node:setPosition(10, slot11 - slot16.height)
		slot0.baseInfoScroll:addChild(slot16.node)

		slot11 = slot11 - slot16.height
	end

	return 
end
slot0.onGotoGetWays = function (slot0, slot1)
	LayerManager.addLayer({
		cleanUp = false,
		name = "commonlayer.GoodsGetWaysLayer",
		data = {
			resourceId = Utility.getKongfuIdByHeroId(slot0.mHeroModelId)
		},
		zOrder = Enums.ZOrderType.ePopLayer
	})

	return 
end
slot0.onRuleAction = function (slot0)
	ui.showRuleMsg({
		image = "tc_1.png",
		textList = {
			TR("1.每位侠客可以装备一个招式，招式能为装备侠客提供属性和天赋加成"),
			TR("2.15资质及以上侠客有招式技，需要装备指定招式才能激活招式技"),
			TR("3.招式可以领悟升重，升重可提升招式属性解锁新天赋"),
			TR("4.侠客装备的指定招式升到一定重数时，可以提升招式技")
		}
	})

	return 
end
slot0.onCheckAction = function (slot0, slot1)
	slot0.listView:scrollToTop(0, true)

	if not slot1.isSelected(slot1) then
		slot0.refreshListView(slot0, KongfuObj:getKongfuList())
	else
		slot0.refreshListView(slot0, KongfuObj:getUnbattaleKongfuList())
	end

	return 
end
slot0.refreshListView = function (slot0, slot1)
	slot0.listView:stopAllActions()
	slot0.listView:removeAllItems()
	table.sort(slot1, function (slot0, slot1)
		if ((Utility.getKongfuIdByHeroId(slot0.mHeroModelId) == slot0.ModelId and 1) or 0) == ((Utility.getKongfuIdByHeroId(slot0.mHeroModelId) == slot1.ModelId and 1) or 0) then
			slot5 = HeroObj:getHeroByKFEntityId(slot1.EntityId)
			slot6 = 0
			slot7 = 0

			if HeroObj:getHeroByKFEntityId(slot0.EntityId) then
				slot6 = (slot4.ModelId == slot0.mHeroModelId and 2) or 1
			end

			if slot5 then
				return ((slot5.ModelId == slot0.mHeroModelId and 2) or 1) < slot6
			end
		else
			return slot3 < slot2
		end

		return 
	end)

	slot2 = 1
	slot3 = 3

	Utility.schedule(slot0.listView, function ()
		if #slot1 < slot0 then
			slot2.listView:stopAllActions()
		else
			for slot3 = 0, slot3 - 1, 1 do
				if slot0 + slot3 <= #slot1 then
					slot6, slot7 = Utility.getColorValue(NewKongfuModel.items[slot1[slot0 + slot3].ModelId].colorLv)
					slot11 = slot2:createLayoutTemplateNode("shengongLayout", {
						cardInfo = {
							cardInfo = {
								modelId = slot5.modelId
							},
							showAttrs = {
								Enums.CardShowAttr.eBorder
							}
						},
						name = (0 < slot4.Step and slot7 .. slot5.name .. "  " .. slot4.Step .. " 重") or slot7 .. slot5.name,
						owner = (HeroObj:getHeroByKFEntityId(slot1[slot0 + slot3].EntityId) and string.format("[装备于 %s]", HeroModel.items[slot8.ModelId].name)) or "",
						quality = "资质：" .. slot7 .. slot5.quality,
						buttonImage = (slot8 and "c_39.png") or "c_27.png",
						titleText = (slot8 and "卸  下") or "选  择",
						clickAction = function (...)
							if slot0 then
								slot1:socketRequest({
									methodName = "UpOrDown",
									moduleName = "NewKongfuInfo",
									methodData = {
										slot0.ModelId,
										Utility.EMPTY_ENTITY_ID
									},
									successCallback = function (slot0)
										HeroObj:modifyItem(slot0.HeroInfo)
										LayerManager.setRestoreData("hero.HeroKongfuInfoLayer", {
											kongfuInfo = KongfuObj:getKongfuInfoByEntityId(slot0)
										})
										slot1:refreshListView(KongfuObj:getKongfuList())
										EventAuto:postEvent(EventDefine.eChangedHeroKongfuClient)

										return 
									end
								})

								return 
							end

							slot1:socketRequest({
								methodName = "UpOrDown",
								moduleName = "NewKongfuInfo",
								methodData = {
									slot1.mHeroModelId,
									slot2.EntityId
								},
								successCallback = function (slot0)
									HeroObj:modifyItem(slot0.HeroInfo)

									if slot0.mCallBack then
										slot0.mCallBack(KongfuObj:getKongfuInfoByEntityId(slot1.EntityId))
									end

									if slot1.ModelId == Utility.getKongfuIdByHeroId(slot0.mHeroModelId) then
										LayerManager.addLayer({
											cleanUp = false,
											name = "hero.NewKongfuSkillActivedPopLayer",
											popRestore = true,
											data = {
												kongfuInfo = KongfuObj:getKuangfuInfoByHeroModelID(slot0.mHeroModelId)
											},
											zOrder = Enums.ZOrderType.ePopLayer
										})
									end

									EventAuto:postEvent(EventDefine.eChangedHeroKongfuClient)
									LayerManager.removeLayer(slot0)

									return 
								end
							})
						end
					})

					if Utility.getKongfuIdByHeroId(slot2.mHeroModelId) == slot4.ModelId then
						slot11.jihuoBg:setVisible(true)
					end

					slot2.listView:pushBackCustomItem(slot11)
				end
			end
		end

		slot0 = slot0 + slot3

		return 
	end, 0.01)

	if #slot1 == 0 then
		slot0.emptyList:setVisible(true)
	else
		slot0.emptyList:setVisible(false)
	end

	return 
end

return slot0
