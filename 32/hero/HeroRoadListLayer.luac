slot0 = class("HeroRoadListLayer", require("common.BaseLayer"), function ()
	return UIWrap.newRootLayer({
		fullScreen = true
	})
end)
slot0.uiTree = {
	{
		name = "mBg",
		cType = "Sprite",
		params = {
			isFullScale = true,
			scaleApt = 2,
			posApt = 1,
			image = "xkzw_1.png",
			pos = {
				x = 568,
				y = 320
			}
		},
		children = {}
	},
	{
		name = "m41Node",
		cType = "Node",
		params = {
			posApt = 1,
			zOrder = 2,
			isLiuHai = true,
			scaleApt = 2,
			pos = {
				x = 284,
				y = 320
			}
		},
		children = {
			{
				name = "treeNode",
				cType = "Sprite",
				params = {
					image = "xkzj_1.png",
					anchor = {
						x = 0.5,
						y = 1
					},
					pos = {
						x = 43.32,
						y = 239.81
					}
				},
				children = {
					{
						name = "treeBranchNode",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 374.95,
								y = 230.9
							}
						},
						children = {
							{
								name = "untitled164",
								cType = "Sprite",
								params = {
									opacity = 0,
									hide = true,
									image = "xkzj_18.png",
									childName = "flowerSprite",
									pos = {
										x = 11,
										y = -2
									}
								},
								children = {}
							},
							{
								name = "untitled165",
								cType = "Button",
								params = {
									childName = "btnBg",
									swallowTouch = false,
									pressedAction = false,
									image = "c_pure.png",
									pos = {
										x = 4.35,
										y = 4.92
									},
									size = {
										width = 110,
										height = 110
									}
								},
								children = {}
							},
							{
								name = "untitled166",
								cType = "Sprite",
								params = {
									image = "c_pure.png",
									childName = "imgHeader",
									pos = {
										x = 4.35,
										y = 4.92
									}
								},
								children = {}
							},
							{
								name = "untitled163",
								cType = "Sprite",
								params = {
									image = "xkzj_2.png",
									childName = "wordSprite",
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							},
							{
								name = "untitled167",
								cType = "Label",
								params = {
									fontSize = 17,
									text = "Label",
									align = 1,
									childName = "infoLabel",
									valign = 1,
									outlineColor = {
										g = 42,
										r = 51,
										b = 24
									},
									pos = {
										x = -1.01,
										y = -33.05
									},
									size = {
										width = 200,
										height = 0
									}
								},
								children = {}
							}
						}
					},
					{
						name = "F00",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 374.95,
								y = 230.9
							}
						},
						children = {}
					},
					{
						name = "F01",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 374.95,
								y = 230.9
							}
						},
						children = {
							{
								name = "untitled171",
								cType = "Effect",
								params = {
									loop = true,
									dataFile = "effect_ui_xiakezhuanjing",
									childName = "effect",
									animation = "01_z",
									pos = {
										x = 167.89,
										y = 84.43
									}
								},
								children = {}
							},
							{
								name = "untitled175",
								cType = "Sprite",
								params = {
									childName = "wordSprite",
									image = "xkzj_2.png",
									hide = true,
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							}
						}
					},
					{
						name = "F02",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 487.39,
								y = 273.98
							}
						},
						children = {
							{
								name = "untitled178",
								cType = "Effect",
								params = {
									loop = true,
									dataFile = "effect_ui_xiakezhuanjing",
									childName = "effect",
									animation = "02_z",
									pos = {
										x = 47.75,
										y = 45.75
									}
								},
								children = {}
							},
							{
								name = "untitled179",
								cType = "Sprite",
								params = {
									childName = "wordSprite",
									image = "xkzj_3.png",
									hide = true,
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							}
						}
					},
					{
						name = "F03",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 150.44,
								y = 218.66
							}
						},
						children = {
							{
								name = "untitled181",
								cType = "Effect",
								params = {
									loop = true,
									dataFile = "effect_ui_xiakezhuanjing",
									childName = "effect",
									animation = "09_z",
									pos = {
										x = 384.47,
										y = 101.35
									}
								},
								children = {}
							},
							{
								name = "untitled182",
								cType = "Sprite",
								params = {
									childName = "wordSprite",
									image = "xkzj_4.png",
									hide = true,
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							}
						}
					},
					{
						name = "F04",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 358.94,
								y = 313.08
							}
						},
						children = {
							{
								name = "untitled184",
								cType = "Effect",
								params = {
									loop = true,
									dataFile = "effect_ui_xiakezhuanjing",
									childName = "effect",
									animation = "05_z",
									pos = {
										x = 178.2,
										y = 9.98
									}
								},
								children = {}
							},
							{
								name = "untitled185",
								cType = "Sprite",
								params = {
									childName = "wordSprite",
									image = "xkzj_5.png",
									hide = true,
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							}
						}
					},
					{
						name = "F05",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 266.04,
								y = 299.22
							}
						},
						children = {
							{
								name = "untitled187",
								cType = "Effect",
								params = {
									loop = true,
									dataFile = "effect_ui_xiakezhuanjing",
									childName = "effect",
									animation = "07_z",
									pos = {
										x = 268.94,
										y = 25.54
									}
								},
								children = {}
							},
							{
								name = "untitled188",
								cType = "Sprite",
								params = {
									childName = "wordSprite",
									image = "xkzj_6.png",
									hide = true,
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							}
						}
					},
					{
						name = "F06",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 377.92,
								y = 433.46
							}
						},
						children = {
							{
								name = "untitled205",
								cType = "Effect",
								params = {
									loop = true,
									dataFile = "effect_ui_xiakezhuanjing",
									childName = "effect",
									animation = "10_z",
									pos = {
										x = 165.23,
										y = -99.93
									}
								},
								children = {}
							},
							{
								name = "untitled206",
								cType = "Sprite",
								params = {
									childName = "wordSprite",
									image = "xkzj_7.png",
									hide = true,
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							}
						}
					},
					{
						name = "F07",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 501,
								y = 378.72
							}
						},
						children = {
							{
								name = "untitled199",
								cType = "Effect",
								params = {
									loop = true,
									dataFile = "effect_ui_xiakezhuanjing",
									childName = "effect",
									animation = "03_z",
									pos = {
										x = 35.66,
										y = -56.57
									}
								},
								children = {}
							},
							{
								name = "untitled200",
								cType = "Sprite",
								params = {
									childName = "wordSprite",
									image = "xkzj_8.png",
									hide = true,
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							}
						}
					},
					{
						name = "F08",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 141.28,
								y = 413.1
							}
						},
						children = {
							{
								name = "untitled196",
								cType = "Effect",
								params = {
									loop = true,
									dataFile = "effect_ui_xiakezhuanjing",
									childName = "effect",
									animation = "08_z",
									pos = {
										x = 393.44,
										y = -91.3
									}
								},
								children = {}
							},
							{
								name = "untitled197",
								cType = "Sprite",
								params = {
									childName = "wordSprite",
									image = "xkzj_9.png",
									hide = true,
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							}
						}
					},
					{
						name = "F09",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 393.85,
								y = 496.6
							}
						},
						children = {
							{
								name = "untitled190",
								cType = "Effect",
								params = {
									loop = true,
									dataFile = "effect_ui_xiakezhuanjing",
									childName = "effect",
									animation = "06_z",
									pos = {
										x = 139.99,
										y = -174.51
									}
								},
								children = {}
							},
							{
								name = "untitled191",
								cType = "Sprite",
								params = {
									childName = "wordSprite",
									image = "xkzj_10.png",
									hide = true,
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							}
						}
					},
					{
						name = "F10",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 531.88,
								y = 442.38
							}
						},
						children = {
							{
								name = "untitled193",
								cType = "Effect",
								params = {
									loop = true,
									dataFile = "effect_ui_xiakezhuanjing",
									childName = "effect",
									animation = "04_z",
									pos = {
										x = -1.48,
										y = -125.44
									}
								},
								children = {}
							},
							{
								name = "untitled194",
								cType = "Sprite",
								params = {
									childName = "wordSprite",
									image = "xkzj_11.png",
									hide = true,
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							}
						}
					}
				}
			},
			{
				name = "untitled117",
				cType = "Scale9Sprite",
				params = {
					image = "xkzj_29.png",
					pos = {
						x = 69.9,
						y = 239.2
					},
					size = {
						width = 240,
						height = 58
					}
				},
				children = {
					{
						name = "mStepLabel",
						cType = "Label",
						params = {
							fontSize = 22,
							isRichText = true,
							emptyInit = true,
							pos = {
								x = 118.17,
								y = 21.35
							},
							text = TR("第0层")
						},
						children = {}
					}
				}
			}
		}
	},
	{
		name = "m43Node",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			zOrder = 2,
			pos = {
				x = 852,
				y = 320
			}
		},
		children = {
			{
				name = "untitled159",
				cType = "Scale9Sprite",
				params = {
					image = "c_9.png",
					pos = {
						x = 0,
						y = -20
					}
				},
				children = {}
			},
			{
				name = "untitled2",
				cType = "Label",
				params = {
					fontSize = 24,
					color = {
						g = 37,
						r = 37,
						b = 37
					},
					pos = {
						x = 3.6,
						y = 184.77
					},
					text = TR("每日首次切换免费")
				},
				children = {}
			},
			{
				name = "showNode",
				cType = "Node",
				params = {
					pos = {
						x = -160.1,
						y = -270
					},
					size = {
						width = 320,
						height = 100
					}
				},
				children = {
					{
						name = "untitled116",
						cType = "Button",
						params = {
							image = "c_27.png",
							childName = "btnUpdate",
							pos = {
								x = 160,
								y = 71.53
							},
							titleText = TR("精 修")
						},
						children = {
							{
								name = "untitled151",
								cType = "RedDot",
								params = {
									childName = "redDot",
									visibleFunc = "cbRoadBtnRedDotVisible",
									hide = true,
									moduleId = 2615
								},
								children = {}
							}
						}
					},
					{
						name = "untitled150",
						cType = "Label",
						params = {
							fontSize = 20,
							childName = "resLabel",
							emptyInit = true,
							isRichText = true,
							outlineColor = {
								g = 42,
								r = 51,
								b = 24
							},
							pos = {
								x = 160,
								y = 24.63
							},
							text = TR("修炼消耗")
						},
						children = {}
					}
				}
			},
			{
				name = "bgLeft",
				cType = "Node",
				params = {
					pos = {
						x = -210,
						y = 5.64
					},
					size = {
						width = 420,
						height = 140
					}
				},
				children = {
					{
						name = "templateRoadNode",
						cType = "TemplateNode",
						custom = {
							{
								value = "untitled153-image",
								name = "roadPic",
								type = "string"
							}
						},
						params = {
							pos = {
								x = 0,
								y = 0
							},
							size = {
								width = 420,
								height = 140
							}
						},
						children = {
							{
								name = "untitled160",
								cType = "Scale9Sprite",
								params = {
									image = "xkzj_31.png",
									childName = "bgSprite",
									pos = {
										x = 208.8,
										y = 90.88
									}
								},
								children = {}
							},
							{
								name = "untitled161",
								cType = "Scale9Sprite",
								params = {
									image = "xkzj_32.png",
									childName = "maskBgSprite",
									pos = {
										x = 208.8,
										y = 90.88
									}
								},
								children = {}
							},
							{
								name = "untitled168",
								cType = "Sprite",
								params = {
									image = "xkzj_30.png",
									pos = {
										x = 131.42,
										y = 93.06
									}
								},
								children = {}
							},
							{
								name = "untitled119",
								cType = "Sprite",
								params = {
									image = "c_pure.png",
									childName = "roadSprite",
									pos = {
										x = 51.51,
										y = 94.98
									}
								},
								children = {
									{
										name = "untitled153",
										cType = "Button",
										params = {
											pressedAction = false,
											image = "xkxx_24.png",
											childName = "btnSkill",
											pos = {
												x = 21.43,
												y = 4.84
											}
										},
										children = {}
									}
								}
							},
							{
								name = "untitled121",
								cType = "Scale9Sprite",
								params = {
									image = "c_pure.png",
									childName = "bgList",
									pos = {
										x = 207.26,
										y = 86.66
									},
									size = {
										width = 420,
										height = 120
									}
								},
								children = {
									{
										name = "untitled124",
										cType = "ListView",
										params = {
											childName = "skillListView",
											direction = false,
											pos = {
												x = 162.92,
												y = 0
											},
											size = {
												width = 260,
												height = 120
											}
										},
										children = {
											{
												name = "templateSkillCell",
												cType = "Layout",
												custom = {
													{
														value = "untitled126-image",
														name = "skillPic",
														type = "string"
													},
													{
														value = "untitled128-text",
														name = "skillName",
														type = "string"
													},
													{
														value = "untitled127-skillId",
														name = "skillId",
														type = "string"
													},
													{
														value = "untitled134-text",
														name = "openText",
														type = "string"
													}
												},
												params = {
													pos = {
														z = 0,
														x = 135.61,
														y = 153.41
													},
													size = {
														width = 120,
														height = 120
													}
												},
												children = {
													{
														name = "untitled127",
														cType = "Button",
														custom = {
															{
																value = 1,
																name = "skillId",
																type = "integer"
															}
														},
														params = {
															childName = "skillBtn",
															image = "c_25.png",
															pressedAction = false,
															clickAction = "onLookSkillAction",
															pos = {
																x = 60,
																y = 70
															}
														},
														children = {}
													},
													{
														name = "untitled126",
														cType = "Sprite",
														params = {
															image = "sk_100001.png",
															childName = "skillBg",
															scale = 0.83,
															pos = {
																x = 60,
																y = 70
															}
														},
														children = {}
													},
													{
														name = "untitled128",
														cType = "Label",
														params = {
															fontSize = 18,
															color = {
																g = 37,
																r = 37,
																b = 37
															},
															pos = {
																x = 60,
																y = 18
															},
															text = TR("五个的名字")
														},
														children = {}
													},
													{
														name = "untitled134",
														cType = "Label",
														params = {
															fontSize = 18,
															hide = true,
															childName = "openLabel",
															color = {
																g = 255,
																r = 255,
																b = 255
															},
															outlineColor = {
																g = 37,
																r = 37,
																b = 37
															},
															pos = {
																x = 60,
																y = 70
															},
															text = TR("第一段开启")
														},
														children = {}
													}
												}
											}
										}
									}
								}
							},
							{
								name = "txtDetail",
								cType = "Label",
								params = {
									fontSize = 22,
									color = {
										g = 37,
										r = 37,
										b = 37
									},
									pos = {
										x = 205.29,
										y = 13.73
									},
									text = TR("点击查看详情")
								},
								children = {}
							},
							{
								name = "untitled129",
								cType = "Button",
								params = {
									image = "c_pure.png",
									childName = "btnDetail",
									pos = {
										x = 208.25,
										y = 14.37
									},
									size = {
										width = 150,
										height = 40
									}
								},
								children = {
									{
										name = "untitled207",
										cType = "RedDot",
										params = {
											visibleFunc = "cbIfChooseHeroRoadVisible",
											moduleId = 2615,
											offset = {
												x = 0.9,
												y = 0.8
											}
										},
										children = {}
									}
								}
							},
							{
								name = "untitled136",
								cType = "BadgeText",
								params = {
									fontSize = 17,
									hide = false,
									image = "c_88.png",
									fontRotation = -45,
									childName = "hadSelected",
									fontColor = {
										g = 199,
										r = 223,
										b = 42
									},
									fontPos = {
										x = 20,
										y = 38
									},
									outlineColor = {
										g = 37,
										r = 37,
										b = 37
									},
									pos = {
										x = 51.24,
										y = 145.06
									},
									text = TR("启用中")
								},
								children = {}
							}
						}
					}
				}
			},
			{
				name = "bgRight",
				cType = "Node",
				params = {
					pos = {
						x = -210,
						y = -145.44
					},
					size = {
						width = 420,
						height = 140
					}
				},
				children = {}
			},
			{
				name = "untitled154",
				cType = "Button",
				params = {
					image = "xktp_3.png",
					clickAction = "onRebornAction",
					pos = {
						x = -280,
						y = -205
					}
				},
				children = {}
			}
		}
	}
}
slot1 = {
	{
		flower = "xkzj_18.png",
		bg = "xkzj_2.png",
		pos = cc.p(350, 235),
		fPos = cc.p(11, -2)
	},
	{
		flower = "xkzj_19.png",
		bg = "xkzj_3.png",
		pos = cc.p(493, 275),
		fPos = cc.p(2, 3)
	},
	{
		flower = "xkzj_20.png",
		bg = "xkzj_4.png",
		pos = cc.p(155, 250),
		fPos = cc.p(-14, 14)
	},
	{
		flower = "xkzj_21.png",
		bg = "xkzj_5.png",
		pos = cc.p(360, 315),
		fPos = cc.p(17, 17)
	},
	{
		flower = "xkzj_22.png",
		bg = "xkzj_6.png",
		pos = cc.p(235, 360),
		fPos = cc.p(-6, 19)
	},
	{
		flower = "xkzj_25.png",
		bg = "xkzj_7.png",
		pos = cc.p(378, 415),
		fPos = cc.p(5, 8)
	},
	{
		flower = "xkzj_24.png",
		bg = "xkzj_8.png",
		pos = cc.p(513, 385),
		fPos = cc.p(19, 19)
	},
	{
		flower = "xkzj_23.png",
		bg = "xkzj_9.png",
		pos = cc.p(141, 425),
		fPos = cc.p(-18, 12)
	},
	{
		flower = "xkzj_26.png",
		bg = "xkzj_10.png",
		pos = cc.p(392, 494),
		fPos = cc.p(0, 15)
	},
	{
		flower = "xkzj_27.png",
		bg = "xkzj_11.png",
		pos = cc.p(560, 508),
		fPos = cc.p(12, 15)
	}
}
slot0.ctor = function (slot0, slot1)
	slot0.super.ctor(slot0, {
		swallow = true
	})

	slot0.mCurrHeroId = slot1.heroModelId or 0

	slot0.initData(slot0)
	slot0.initUI(slot0)

	return 
end
slot0.initData = function (slot0)
	slot0.mHeroList = {}
	slot1 = Utility.getConfigItems("ModuleSubConfig")[ModuleSub.eHeroRoad].openLv

	for slot5, slot6 in ipairs(HeroObj:getSortList()) do
		if HeroObj:isOpenRoad(slot6) then
			table.insert(slot0.mHeroList, slot6)
		end
	end

	return 
end
slot0.initUI = function (slot0)
	slot1 = 1

	for slot5, slot6 in ipairs(slot0.mHeroList) do
		if slot6 == slot0.mCurrHeroId then
			slot1 = slot5

			break
		end
	end

	slot0.createUITree(slot0, function (slot0, slot1)
		return 
	end)
	slot0.refreshUI(slot0)

	return 
end
slot0.immediateRefreshUi = function (slot0, slot1)
	slot0.mCurrHeroId = slot1.heroModelId

	slot0.refreshUI(slot0)

	return 
end
slot0.refreshUI = function (slot0, slot1)
	slot0.heroModel = HeroModel.items[slot0.mCurrHeroId]
	slot0.roadInfo = HeroObj:getItem(slot0.mCurrHeroId).HeroRoadInfo or {}

	if (slot0.roadInfo.RoadID or 0) == 0 then
		slot0.mStepLabel:setString("#C04141未选择专修方向")
	else
		slot0.mStepLabel:setString(TR("第%s层", slot0.getActiveFloorId(slot0)))
	end

	slot0.refreshRoadInfo(slot0, 1, slot0.bgLeft)
	slot0.refreshRoadInfo(slot0, 2, slot0.bgRight)
	slot0.refreshUpdateInfo(slot0, slot0.showNode, slot1)

	return 
end
slot0.refreshRoadInfo = function (slot0, slot1, slot2)
	slot3 = slot0.roadInfo.NodeID or 0

	slot2.removeAllChildren(slot2)
	slot0.createLayoutTemplateNode(slot0, "templateRoadNode", {
		roadPic = HeroRoadDecRelation.items[slot0.heroModel.profession][slot1].newProfessionPic .. ".png"
	}).bgSprite:setGray((slot0.roadInfo.RoadID or 0) ~= slot1)
	slot7.hadSelected:setVisible((slot0.roadInfo.RoadID or 0) == slot1)
	slot7.maskBgSprite:setVisible((slot0.roadInfo.RoadID or 0) == slot1)
	slot7.setPosition(slot7, 0, 0)
	slot2.addChild(slot2, slot7)

	slot8 = {}

	for slot13, slot14 in ipairs(HeroRoadModel.items[slot0.heroModel.profession*1000 + slot0.heroModel.quality][slot1]) do
		if 0 < slot14.skillId then
			table.insert(slot8, {
				skillId = slot14.skillId,
				floorId = slot14.floorID,
				orderId = slot14.orderID
			})
		end
	end

	for slot13, slot14 in ipairs(slot8) do
		skillId = tonumber(slot14.skillId)

		ui.nodeSetGray(slot0.createLayoutTemplateNode(slot0, "templateSkillCell", {
			skillId = skillId,
			skillName = SkillModel.items[skillId].skillName,
			skillPic = SkillModel.items[skillId].skillPic .. ".png",
			openText = TR("第%s层开启", slot14.floorId)
		}).skillBg, slot3 < slot14.orderId)
		slot16.openLabel:setVisible(slot3 < slot14.orderId)
		slot16.skillBtn:setBright(slot14.orderId <= slot3)
		slot7.bgList.skillListView:pushBackCustomItem(slot16)
	end

	slot7.txtDetail:runAction(cc.RepeatForever:create(cc.Sequence:create({
		cc.DelayTime:create(0.5),
		cc.FadeTo:create(1, 100),
		cc.FadeTo:create(1, 255),
		cc.DelayTime:create(0.5)
	})))
	slot7.roadSprite.btnSkill:setClickAction(function ()
		slot0:onSwitchRaodAction(slot0)

		return 
	end)
	slot7.btnDetail:setClickAction(function ()
		slot0:onSwitchRaodAction(slot0)

		return 
	end)

	return 
end
slot0.refreshUpdateInfo = function (slot0, slot1, slot2)
	slot3 = slot0.roadInfo.NodeID or 0
	slot5 = slot0.getActiveFloorId(slot0)
	slot6 = ((slot0.roadInfo.RoadID or 0) == 0 and 1) or slot0.roadInfo.RoadID or 0
	slot9 = {}

	for slot13, slot14 in pairs(slot8) do
		if slot14.floorID == slot5 then
			table.insert(slot9, slot14)
		end
	end

	table.sort(slot9, function (slot0, slot1)
		return slot0.floorOrderID < slot1.floorOrderID
	end)

	slot0.mHeaderList = {}

	slot0.treeNode:removeAllChildren()

	for slot13, slot14 in ipairs(slot9) do
		slot15 = slot0.createUpdateHeaderNode(slot0, slot14, slot3, slot2)

		if slot14.orderID < slot3 then
			slot0.treeNode:addChild(slot0.createLayoutTemplateNode(slot0, string.format("F%02d", slot14.floorOrderID)), 0)
		elseif slot14.orderID == slot3 then
			if slot2 then
				slot0.isHaveEffect = true
				slot16 = slot0.createLayoutTemplateNode(slot0, string.format("F%02d", slot14.floorOrderID))
				slot0.tmpHeader = slot15
				slot20 = slot0.createLayoutTemplateNode(slot0, "F00")

				slot0.treeNode:addChild(slot20, 0)
				slot20.setPosition(slot20, slot17)

				slot0.curEffectNode = slot20

				slot20.addChild(slot20, UIWrap.newControl("Effect", {
					loop = false,
					dataFile = "effect_ui_xiakezhuanjing",
					animation = ({
						"1",
						"2",
						"9",
						"5",
						"7",
						"10",
						"3",
						"8",
						"6",
						"4"
					})[slot14.floorOrderID],
					pos = cc.p(slot16.effect:getPositionX(), slot16.effect:getPositionY()),
					complete = function ()
						slot0.curEffectNode:removeFromParent()

						slot0.curEffectNode.removeFromParent.curEffectNode = nil

						slot0.treeNode:addChild(slot0.curEffectNode.removeFromParent:createLayoutTemplateNode(string.format("F%02d", slot1.floorOrderID)), 0)

						if slot0.treeNode.addChild.skillId ~= nil and 0 < slot1.skillId then
							slot0.tmpHeader.imgHeader:setGray(false)
						else
							slot0.tmpHeader.wordSprite:setGray(false)
						end

						slot0.tmpHeader = nil
						slot0.isHaveEffect = false

						return 
					end
				}))
			else
				slot0.treeNode:addChild(slot0.createLayoutTemplateNode(slot0, string.format("F%02d", slot14.floorOrderID)), 0)
			end
		end

		table.insert(slot0.mHeaderList, slot15)
		slot0.treeNode:addChild(slot15, 1)
	end

	slot10 = HeroObj:getItem(slot0.mCurrHeroId)
	slot11 = nil

	for slot15, slot16 in ipairs(slot9) do
		if slot16.orderID == slot3 + 1 then
			slot11 = clone(slot16)

			break
		end
	end

	slot1.btnUpdate:setEnabled(false)

	if slot4 == 0 then
		slot1.resLabel:setString(TR("#C04141请先选择专修方向"))
	elseif slot11 ~= nil then
		if slot10.Lv < slot11.needHeroLv then
			slot1.resLabel:setString(TR("需要侠客升到%s%s级", "#C04141", slot11.needHeroLv))
		else
			slot13 = ""

			for slot17, slot18 in ipairs(slot12) do
				slot19 = Resource.getDaibiImg(slot18.resourceId)
				slot20 = Resource.getCount(slot18.resourceId)

				if 1 < slot17 then
					slot13 = slot13 .. "  "
				end

				slot13 = slot13 .. string.format("{%s}%s%s/%s", slot19, (slot18.num <= slot20 and "#37FF40") or "#C04141", Utility.numberWithUnit(slot20), Utility.numberWithUnit(slot18.num))
			end

			slot1.resLabel:setString(slot13)
			slot1.btnUpdate:setEnabled(true)
			slot1.btnUpdate:setClickAction(function ()
				for slot3, slot4 in pairs(pairs) do
					if not Resource.isEnough(slot4.resourceId, slot4.num) then
						return 
					end
				end

				slot1:requestActiveNode(slot1.mCurrHeroId, , slot3 + 1)

				return 
			end)
		end
	else
		slot1.resLabel:setString(TR("#C04141已精修到最高"))
	end

	return 
end
slot0.showTenNodeEffect = function (slot0, slot1)
	if not slot0.mHeaderList[10] then
		return 
	end

	slot3 = slot0.createLayoutTemplateNode(slot0, "F10")
	slot0.isHaveEffect = true
	slot0.tmpHeader = slot2
	slot6 = slot0.createLayoutTemplateNode(slot0, "F00")

	slot0.treeNode:addChild(slot6, 0)
	slot6.setPosition(slot6, slot4)

	slot0.curEffectNode = slot6

	slot6.addChild(slot6, UIWrap.newControl("Effect", {
		loop = false,
		animation = "4",
		dataFile = "effect_ui_xiakezhuanjing",
		pos = cc.p(slot3.effect:getPositionX(), slot3.effect:getPositionY()),
		complete = function ()
			slot0.curEffectNode:removeFromParent()

			slot0.curEffectNode.removeFromParent.curEffectNode = nil
			slot0 = slot0.curEffectNode.removeFromParent:createLayoutTemplateNode("F10")

			slot0.treeNode:addChild(slot0, 0)

			if slot0.tmpHeader.imgHeader then
				slot0.tmpHeader.imgHeader:setGray(false)
			end

			if slot0.tmpHeader.wordSprite then
				slot0.tmpHeader.wordSprite:setGray(false)
			end

			slot0.tmpHeader = nil

			Utility.performWithDelay(slot0.treeNode, function ()
				slot0.isHaveEffect = false

				if false then
					slot1()
				end

				return 
			end, 1)

			return 
		end
	}))

	return 
end
slot0.createUpdateHeaderNode = function (slot0, slot1, slot2, slot3)
	slot0.createLayoutTemplateNode(slot0, "treeBranchNode"):setPosition(slot0[slot1.floorOrderID].pos)

	if slot1.skillId ~= nil and 0 < slot1.skillId then
		slot5.infoLabel:setString(SkillModel.items[slot1.skillId].skillName)
		slot5.imgHeader:setTexture(SkillModel.items[slot1.skillId].skillPic .. ".png")
		slot5.imgHeader:setPosition(cc.p(3, 3))
		slot5.wordSprite:setVisible(false)
		slot5.imgHeader:setScale(0.4)
		slot5.btnBg:loadTextures("xkxx_80.png", "xkxx_80.png")
		slot5.btnBg:setScale(0.45)

		if not slot3 then
			slot5.imgHeader:setGray(slot2 < slot1.orderID)
		else
			slot5.imgHeader:setGray(slot2 <= slot1.orderID)
		end

		slot5.btnBg:setClickAction(function ()
			LayerManager.addLayer({
				cleanUp = false,
				name = "hero.DlgRoadSkillLayer",
				data = {
					skillModelId = slot0.skillId
				},
				zOrder = Enums.ZOrderType.ePopLayer
			})

			return 
		end)
	else
		slot6 = ""

		for slot10, slot11 in ipairs(Utility.analysisStrAttrList(slot1.attrStr)) do
			if 1 < slot10 then
				slot6 = slot6 .. "\n"
			end

			slot6 = (Utility.isAttrNeedPercent(slot11.fightattr) and slot6 .. string.format("%s+%s%%", FightAttrTypeName[slot11.fightattr], slot11.value/100)) or slot6 .. string.format("%s+%s", FightAttrTypeName[slot11.fightattr], slot11.value)
		end

		slot5.infoLabel:setString(slot6)
		slot5.imgHeader:setTexture("c_pure.png")
		slot5.wordSprite:setTexture(slot4.bg)

		if not slot3 then
			slot5.wordSprite:setGray(slot2 < slot1.orderID)
		else
			slot5.wordSprite:setGray(slot2 <= slot1.orderID)
		end

		slot5.btnBg:setVisible(false)
	end

	return slot5
end
slot0.getActiveFloorId = function (slot0)
	slot1 = slot0.roadInfo.NodeID or 0

	if (slot0.roadInfo.RoadID or 0) == 0 then
		slot2 = 1
	end

	if HeroRoadModel.items[slot0.heroModel.profession*1000 + slot0.heroModel.quality][slot2][slot1 + 1] == nil then
		slot5 = slot1
	end

	return math.ceil(slot5/10)
end
slot0.onRuleClickAction = function (slot0, slot1)
	ui.showRuleMsg({
		image = "tc_1.png",
		textList = {
			TR("1.13资质以上侠客需要达到%d级、5星并且进阶到紫色品质才能开启专精；", HeroConfig.items[1].needHeroLv),
			TR("2.每种职业都有2种可选择的专精；"),
			TR("3.每种专精共有5段，每段需要精修满10次才能精修下一段，并且可能解锁专修技能。"),
			TR("4.每个侠客每天可免费切换1次专精，切换专精会继承原专精的培养进度。")
		}
	})

	return 
end
slot0.onTopHeaderClickAction = function (slot0, slot1)
	slot0.mCurrHeroId = slot0.mHeroList[slot1]

	slot0.refreshUI(slot0)

	return 
end
slot0.cbRoadBtnRedDotVisible = function (slot0, slot1)
	slot1.setVisible(slot1, RedDotObj:isValid(ModuleSub.eHeroAttrPoint, tostring(slot0.mCurrHeroId) .. "_IfActiveNextHeroRoadNode"))

	return 
end
slot0.cbIfChooseHeroRoadVisible = function (slot0, slot1)
	slot1.setVisible(slot1, RedDotObj:isValid(ModuleSub.eHeroAttrPoint, tostring(slot0.mCurrHeroId) .. "_IfChooseHeroRoad"))

	return 
end
slot0.onSwitchRaodAction = function (slot0, slot1)
	LayerManager.addLayer({
		cleanUp = false,
		name = "hero.HeroRoadDlgSwitchLayer",
		data = {
			showRoadId = slot1,
			currHeroId = slot0.mCurrHeroId,
			callback = handler(slot0, slot0.refreshUI)
		},
		Order = Enums.ZOrderType.ePopLayer
	})

	return 
end
slot0.onLookSkillAction = function (slot0, slot1)
	LayerManager.addLayer({
		cleanUp = false,
		name = "hero.DlgRoadSkillLayer",
		data = {
			skillModelId = slot1.skillId
		},
		zOrder = Enums.ZOrderType.ePopLayer
	})

	return 
end
slot0.showActiveSkillDlg = function (slot0, slot1, slot2)
	ui.showMessageBox({
		msgBoxParams = {
			needTouchClose = true
		},
		titleText = TR("提 示"),
		diyUICallback = function (slot0, slot1)
			slot2 = SkillModel.items[slot0]
			slot5 = {
				isRichText = true,
				text = (slot1 ~= nil and TR("激活专精第%s层", slot1)) or TR("当前专精已被精修到最高"),
				color = cc.c3b(37, 37, 37),
				pos = cc.p(slot1.width/2, slot1.height/2 + 60)
			}

			slot0.addChild(slot0, UIWrap.newControl)
			slot0.addChild(slot0, "Label")
			slot0.addChild(slot0, UIWrap.newControl("Label", {
				fontSize = 20,
				align = 0,
				isRichText = true,
				valign = 0,
				text = Resource.getSkillIntroStr(slot0, 1, 1, "#252525", "#258711"),
				anchor = cc.p(0, 1),
				pos = cc.p(60, slot1.height/2),
				color = cc.c3b(37, 37, 37),
				size = cc.size(slot1.width - 100, 0)
			}))

			return 
		end,
		okCallback = function ()
			return 
		end
	})

	return 
end
slot0.onRebornAction = function (slot0)
	slot1 = HeroObj:getItem(slot0.mCurrHeroId).HeroRoadInfo or {}

	if not Utility.moduleIsOpen(ModuleSub.eHeroRoadRebirth, true) then
		return 
	end

	if not next(slot1) or (slot1.RoadID and (slot1.RoadID == 0 or slot1.NodeID == 0)) then
		ui.showFlashView(TR("还未精修专精，无法重生"))

		return 
	end

	LayerManager.addLayer({
		cleanUp = false,
		name = "hero.HeroRoadRebornLayer",
		data = {
			heroId = slot0.mCurrHeroId,
			callback = handler(slot0, slot0.refreshUI)
		},
		zOrder = Enums.ZOrderType.ePopLayer
	})

	return 
end
slot0.requestActiveNode = function (slot0, slot1, slot2, slot3)
	slot6 = HeroRoadModel.items[slot0.heroModel.profession*1000 + slot0.heroModel.quality][slot2][slot3]
	slot7 = HeroRoadModel.items[slot0.heroModel.profession*1000 + slot0.heroModel.quality][slot2][slot3 + 1] or {}

	if slot0.isHaveEffect and (slot7.floorID ~= slot6.floorID or slot7.floorID == nil) then
		return 
	end

	slot0.socketRequest(slot0, {
		methodName = "ActiveNode",
		moduleName = "HeroRoad",
		methodData = {
			slot1,
			slot2,
			slot3
		},
		successCallback = function (slot0)
			slot1 = clone(HeroObj:getItem(slot0))
			slot1.HeroRoadInfo = clone(slot0)

			HeroObj:modifyItem(slot1)

			if slot1.floorID == nil or slot1.floorID ~= slot2.floorID then
				slot3:showTenNodeEffect(function ()
					if 0 < slot0.skillId then
						slot1:showActiveSkillDlg(slot2.floorID, slot0.skillId)
					else
						ui.showFlashView((slot2.floorID == nil and TR("恭喜您已经激活了全部专精")) or TR("恭喜激活专精第%s层", slot2.floorID))
					end

					slot1:refreshUI(slot2.floorID ~= nil)

					return 
				end)
			else
				slot3:refreshUI(true)
			end

			return 
		end
	})

	return 
end

return slot0
