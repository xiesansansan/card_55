slot0 = class("JzwlHallOfFameLayer", require("common.BaseLayer"), function ()
	return UIWrap.newRootLayer({
		fullScreen = true
	})
end)
slot0.uiTree = {
	{
		name = "untitled28",
		cType = "Node",
		params = {
			isFullScale = true,
			posApt = 1,
			scaleApt = 2,
			pos = {
				x = 568,
				y = 320
			}
		},
		children = {
			{
				name = "untitled29",
				cType = "Effect",
				params = {
					dataFile = "effect_zhandou_wuxinghuanjing",
					pos = {
						x = 0,
						y = 0
					}
				},
				children = {}
			}
		}
	},
	{
		name = "centerNode",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			pos = {
				x = 568,
				y = 320
			}
		},
		children = {
			{
				name = "untitled7",
				cType = "Sprite",
				params = {
					image = "jzwl_74.png",
					pos = {
						x = 0,
						y = 230
					}
				},
				children = {}
			},
			{
				name = "playerNode",
				cType = "Node",
				params = {
					pos = {
						x = 0,
						y = 0
					}
				},
				children = {
					{
						name = "playerTemplate",
						cType = "TemplateNode",
						params = {
							pos = {
								x = 0,
								y = -150
							}
						},
						children = {
							{
								name = "untitled30",
								cType = "Node",
								params = {
									childName = "figureNode",
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {
									{
										name = "untitled18",
										cType = "Sprite",
										params = {
											image = "bwld_13.png",
											childName = "emptyFigure",
											scale = 0.7,
											pos = {
												x = 39.58,
												y = 139.63
											}
										},
										children = {}
									}
								}
							},
							{
								name = "untitled32",
								cType = "Sprite",
								params = {
									image = "yb_32.png",
									childName = "topBg",
									pos = {
										x = 4.46,
										y = 298.4
									}
								},
								children = {
									{
										name = "untitled33",
										cType = "GuildFlag",
										params = {
											childName = "guildFlag",
											scale = 0.4,
											pos = {
												x = 31.7,
												y = 29.56
											}
										},
										children = {}
									},
									{
										name = "untitled34",
										cType = "Label",
										params = {
											emptyInit = true,
											childName = "nameLabel",
											pos = {
												x = 125.55,
												y = 31.84
											},
											text = TR("名字")
										},
										children = {}
									}
								}
							},
							{
								name = "untitled26",
								cType = "Sprite",
								params = {
									image = "qcql_12.png",
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							},
							{
								name = "untitled35",
								cType = "Node",
								params = {
									childName = "emptyNode",
									pos = {
										x = 11,
										y = -32
									}
								},
								children = {
									{
										name = "untitled36",
										cType = "Sprite",
										params = {
											image = "jzwl_75.png",
											pos = {
												x = 0,
												y = 0
											}
										},
										children = {
											{
												name = "untitled37",
												cType = "Sprite",
												params = {
													image = "jzwl_77.png",
													pos = {
														x = 84,
														y = 32
													}
												},
												children = {}
											}
										}
									}
								}
							},
							{
								name = "untitled39",
								cType = "Node",
								params = {
									childName = "infoNode",
									pos = {
										x = 0,
										y = -12
									}
								},
								children = {
									{
										name = "untitled42",
										cType = "Scale9Sprite",
										params = {
											image = "jzwl_75.png",
											pos = {
												x = 0,
												y = 0
											},
											size = {
												width = 194,
												height = 50
											}
										},
										children = {}
									},
									{
										name = "untitled43",
										cType = "Scale9Sprite",
										params = {
											image = "jzwl_75.png",
											pos = {
												x = 0,
												y = -31
											},
											size = {
												width = 194,
												height = 50
											}
										},
										children = {}
									},
									{
										name = "untitled44",
										cType = "Sprite",
										params = {
											image = "jzwl_73.png",
											pos = {
												x = 0,
												y = -69
											}
										},
										children = {}
									},
									{
										name = "untitled49",
										cType = "Button",
										params = {
											image = "jzwl_72.png",
											clickAction = "onLikeBtnClick",
											childName = "likeBtn",
											pos = {
												x = -52.82,
												y = -70.7
											}
										},
										children = {}
									},
									{
										name = "untitled46",
										cType = "Label",
										params = {
											fontSize = 18,
											childName = "playerName",
											pos = {
												x = -4.66,
												y = -3.03
											},
											text = TR("玩家名字")
										},
										children = {}
									},
									{
										name = "untitled48",
										cType = "Label",
										params = {
											fontSize = 18,
											childName = "lvLabel",
											pos = {
												x = -4.66,
												y = -36.03
											},
											text = TR("帮派等级:5")
										},
										children = {}
									},
									{
										name = "untitled47",
										cType = "Label",
										params = {
											text = "10",
											childName = "likeCntLabel",
											pos = {
												x = -4.66,
												y = -72.03
											}
										},
										children = {}
									}
								}
							}
						}
					}
				}
			}
		}
	},
	{
		name = "leftNode",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			pos = {
				x = 0,
				y = 0
			}
		},
		children = {
			{
				name = "untitled17",
				cType = "Sprite",
				params = {
					image = "jzwl_76.png",
					anchor = {
						x = 0,
						y = 0
					},
					pos = {
						x = 0,
						y = 0
					}
				},
				children = {
					{
						name = "tipsLable",
						cType = "Label",
						params = {
							fontSize = 22,
							align = 1,
							valign = 1,
							pos = {
								x = 258.03,
								y = 38.67
							},
							size = {
								width = 500,
								height = 60
							},
							text = TR("参加决战武林玩法获得第一的帮派即可入住荣誉室每一个帮派参与即可为城战挂机收益增加10%")
						},
						children = {}
					}
				}
			}
		}
	},
	{
		name = "rightNode",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			pos = {
				x = 1136,
				y = 320
			}
		},
		children = {
			{
				name = "untitled11",
				cType = "Button",
				params = {
					image = "tb_gn_12.png",
					clickAction = "onRankBtnClick",
					pos = {
						x = -60,
						y = 200
					}
				},
				children = {}
			},
			{
				name = "untitled14",
				cType = "Scale9Sprite",
				params = {
					image = "c_112.png",
					anchor = {
						x = 1,
						y = 0.5
					},
					pos = {
						x = 0,
						y = -275
					},
					size = {
						width = 200,
						height = 40
					}
				},
				children = {
					{
						name = "lastLikeCntLabel",
						cType = "Label",
						params = {
							pos = {
								x = 100,
								y = 20
							},
							text = TR("剩余点赞次数: 5")
						},
						children = {}
					}
				}
			}
		}
	},
	{
		name = "untitled4",
		cType = "TopResourceNode",
		params = {
			posApt = 1,
			scaleApt = 2,
			moduleIdList = {
				1111,
				1112,
				1114
			},
			pos = {
				x = 604.78,
				y = 586.72
			}
		},
		children = {}
	},
	{
		name = "untitled50",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			pos = {
				x = 0,
				y = 640
			}
		},
		children = {
			{
				name = "untitled1",
				cType = "Button",
				params = {
					clickAction = "onCloseBtnClick",
					image = "c_1.png",
					anchor = {
						x = 0,
						y = 1
					},
					pos = {
						x = 0,
						y = 0
					}
				},
				children = {
					{
						name = "untitled2",
						cType = "Sprite",
						params = {
							image = "jzwl_0.png",
							anchor = {
								x = 0,
								y = 1
							},
							pos = {
								x = -29.46,
								y = 30.97
							}
						},
						children = {}
					}
				}
			},
			{
				name = "untitled3",
				cType = "Button",
				params = {
					image = "c_3.png",
					clickAction = "onRuleBtnClick",
					swallowTouch = true,
					pos = {
						x = 284.39,
						y = -26.17
					}
				},
				children = {}
			}
		}
	}
}
slot0.ctor = function (slot0, slot1)
	slot0.playerList = {}

	slot0.super.ctor(slot0)
	slot0.initUI(slot0)
	slot0.requestGetInfo(slot0)

	return 
end
slot0.initUI = function (slot0)
	slot0.createUITree(slot0)
	slot0.tipsLable:setString(TR("参加决战武林玩法获得第一的帮派即可入住荣誉室每一个帮派参与即可为城战挂机收益增加%d%%", LeaguetopfinalConfig.items[1].winNumAddR/100))

	return 
end
slot0.refreshLayer = function (slot0)
	slot0.refresLike(slot0)
	slot0.refreshPlayers(slot0)
	slot0.lastLikeCntLabel:setString(TR("剩余点赞次数: %d", slot0.myInfo.Dig - 1))

	return 
end
slot0.refresLike = function (slot0)
	slot0.lastLikeCntLabel:setString(TR("剩余点赞次数: %d", 0))

	return 
end
slot1 = {
	cc.p(-375, -150),
	cc.p(-125, -150),
	cc.p(125, -150),
	cc.p(375, -150)
}
slot0.refreshPlayers = function (slot0)
	slot0.playerNode:removeAllChildren()

	function slot1(slot0, slot1)
		slot2 = slot0:createLayoutTemplateNode("playerTemplate")

		slot0.playerNode:addChild(slot2)
		slot2.setPosition(slot2, slot1)
		slot2.emptyNode:setVisible(slot3)
		slot2.infoNode:setVisible(not not slot0)

		if not slot0 then
			slot2.topBg:setVisible(false)

			return 
		end

		slot2.topBg.nameLabel:setString(TR("帮派: %s", slot0.PlayerInfo.GuildName))
		slot2.figureNode:removeAllChildren()
		slot2.infoNode.playerName:setString(TR("帮主: %s", slot0.PlayerInfo.Name))
		slot2.infoNode.lvLabel:setString(TR("帮派等级: %d", slot0.Lv))
		slot2.infoNode.likeCntLabel:setString(slot0.Dig)
		slot2.topBg.guildFlag:setFlag(slot0.BannerInfo)
		slot2.topBg.guildFlag:setString(slot0.Logo)

		slot2.infoNode.likeBtn.guildId = slot0.PlayerInfo.GuildId
		slot2.infoNode.likeBtn.groupId = slot0.GroupId

		if slot0 ~= nil then
			if Utility.getPlayerLihuiName(slot0.PlayerInfo.HeadImageId) ~= "" then
				slot5 = UIWrap.newControl("Effect", {
					loop = true,
					animation = "animation",
					scale = 0.3,
					dataFile = slot4
				})

				slot5.setPosition(slot5, cc.p(0, 0))
				slot2.figureNode:addChild(slot5)
			else
				slot2.figureNode:addChild(UIWrap.newControl("Sprite", {
					scale = 0.5,
					image = Utility.getHeroStandImage(slot0.HeadImageId),
					pos = cc.p(0, 150)
				}))
			end
		end

		return 
	end

	slot3 = {
		1,
		2,
		3,
		4
	}

	if #slot0.playerList == 2 then
		slot3 = {
			0,
			1,
			2,
			0
		}
	elseif slot2 == 1 then
		slot3 = {
			0,
			1,
			0,
			0
		}
	end

	for slot7 = 1, 4, 1 do
		slot1(slot0.playerList[slot3[slot7]], slot0[slot7])
	end

	return 
end
slot0.onRankBtnClick = function (slot0)
	LayerManager.addLayer({
		cleanUp = false,
		name = "jzwl.DlgJzwlRankLayer",
		data = {
			groupId = slot0.myInfo.GroupId
		}
	})

	return 
end
slot0.onRuleBtnClick = function (slot0)
	ui.showRuleMsg({
		textList = {
			TR("1、本服选取出的四个帮派，参与决战武林胜利方会入驻荣誉堂展示；"),
			TR("2、本服玩家每日可以对其进行点赞，点赞可以随机获取一份奖励；"),
			TR("3、本服每有一个帮派决战武林获胜，可以提高本服帮战挂机奖励5%，最高可以获得20%。")
		}
	})

	return 
end
slot0.onCloseBtnClick = function (slot0)
	LayerManager.removeLayer(slot0)

	return 
end
slot0.onLikeBtnClick = function (slot0, slot1)
	if 1 <= slot0.myInfo.Dig then
		ui.showFlashView("点赞次数已用尽")

		return 
	end

	slot0.requestDigReward(slot0, slot1.groupId, slot1.guildId)

	return 
end
slot0.Test = function (slot0)
	slot0.myInfo = {
		Dig = 0
	}

	slot0.refreshLayer(slot0)

	return 
end
slot0.requestGetInfo = function (slot0)
	slot0.socketRequest(slot0, {
		methodName = "GetLeaguetopInfo",
		moduleName = "Leaguetopfinal",
		methodData = {},
		successCallback = function (slot0)
			dump(slot0, "MMMMM1")

			slot0.playerList = slot0.WinnerHistoryInfo
			slot0.myInfo = slot0.Myinfo

			slot0:refreshLayer()

			return 
		end
	})

	return 
end
slot0.requestDigReward = function (slot0, slot1, slot2)
	slot0.socketRequest(slot0, {
		methodName = "DigReward",
		moduleName = "Leaguetopfinal",
		methodData = {
			slot1,
			slot2
		},
		successCallback = function (slot0)
			dump(slot0, "MMMMM2")
			ui.showFlashReward({
				BaseGetGameResourceList = slot0.BaseGetGameResourceList
			})

			slot0.playerList = slot0.WinnerHistoryInfo
			slot0.myInfo = slot0.Myinfo

			slot0:refreshLayer()

			return 
		end
	})

	return 
end

return slot0
