slot0 = class("FishingHomeLayer", require("common.BaseLayer"), function ()
	return UIWrap.newRootLayer({
		fullScreen = false
	})
end)
slot0.uiTree = {
	{
		name = "untitled19",
		cType = "Effect",
		params = {
			loop = true,
			dataFile = "effect_ui_diaoyu",
			posApt = 1,
			isPlayAnimation = true,
			isFullScale = true,
			scaleApt = 2,
			animation = "diaoyu_changjing",
			pos = {
				x = 568,
				y = 320
			}
		},
		children = {}
	},
	{
		name = "untitled18",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			pos = {
				x = 568,
				y = 320
			}
		},
		children = {
			{
				name = "mPole",
				cType = "Effect",
				params = {
					loop = false,
					dataFile = "effect_ui_diaoyu",
					isPlayAnimation = false,
					skin = "putongyu",
					animation = "diaoyu_daiji",
					pos = {
						x = -0.45,
						y = 0.45
					}
				},
				children = {}
			},
			{
				name = "mGetFish",
				cType = "Button",
				params = {
					image = "jhqy_dy_10.png",
					anchor = {
						x = 0.5,
						y = 0
					},
					pos = {
						x = 34.18,
						y = -132.22
					}
				},
				children = {}
			},
			{
				name = "mHookSprite",
				cType = "Label",
				params = {
					hide = true,
					outlineColor = {
						g = 37,
						r = 37,
						b = 37
					},
					pos = {
						x = -0.57,
						y = 182.71
					},
					text = TR("点击屏幕放下鱼钩")
				},
				children = {}
			},
			{
				name = "mFishFly",
				cType = "Node",
				params = {
					pos = {
						x = 161.57,
						y = 198.55
					}
				},
				children = {}
			}
		}
	},
	{
		name = "untitled16",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			pos = {
				x = 568,
				y = 0
			}
		},
		children = {
			{
				name = "mLine",
				cType = "Scale9Sprite",
				params = {
					image = "jhqy_dy_8.png",
					pos = {
						x = 36.58,
						y = 60.62
					}
				},
				children = {
					{
						name = "mCircle",
						cType = "Sprite",
						params = {
							image = "jhqy_dy_6.png",
							pos = {
								x = 132.57,
								y = 0
							}
						},
						children = {}
					}
				}
			},
			{
				name = "mFishLine",
				cType = "Scale9Sprite",
				params = {
					image = "c_pure.png",
					anchor = {
						x = 0,
						y = 0.5
					},
					pos = {
						x = -54.25,
						y = 56.61
					},
					size = {
						width = 477.34,
						height = 11.47
					}
				},
				children = {
					{
						name = "mFish",
						cType = "Sprite",
						params = {
							image = "jhqy_dy_7.png",
							hide = true,
							pos = {
								x = 160.07,
								y = 0
							}
						},
						children = {}
					}
				}
			}
		}
	},
	{
		name = "mNode",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			pos = {
				x = 568,
				y = 320
			}
		},
		children = {}
	},
	{
		name = "untitled1",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			anchor = {
				x = 0,
				y = 1
			},
			pos = {
				x = 0,
				y = 640
			}
		},
		children = {
			{
				name = "untitled2",
				cType = "Button",
				params = {
					clickAction = "onClickClose",
					image = "c_1.png",
					anchor = {
						x = 0,
						y = 1
					},
					pos = {
						x = 0,
						y = 0
					}
				},
				children = {
					{
						name = "untitled23",
						cType = "Sprite",
						params = {
							image = "jhqy_dy_11.png",
							pos = {
								x = 4.12,
								y = 5.47
							}
						},
						children = {}
					}
				}
			},
			{
				name = "untitled21",
				cType = "Label",
				params = {
					anchor = {
						x = 0.5,
						y = 0
					},
					color = {
						g = 37,
						r = 37,
						b = 37
					},
					pos = {
						x = 120.32,
						y = -83.23
					},
					text = TR("1.点击屏幕下竿")
				},
				children = {}
			},
			{
				name = "untitled22",
				cType = "Label",
				params = {
					anchor = {
						x = 0,
						y = 0.5
					},
					color = {
						g = 37,
						r = 37,
						b = 37
					},
					pos = {
						x = 44.74,
						y = -104.49
					},
					text = TR("2.选择合适的时机点击屏幕起竿")
				},
				children = {}
			}
		}
	},
	{
		name = "mResourceNode",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			anchor = {
				x = 1,
				y = 1
			},
			pos = {
				x = 1136,
				y = 640
			}
		},
		children = {
			{
				name = "mScoreIcon",
				cType = "Sprite",
				params = {
					image = "jhqy_dy__1.png",
					pos = {
						x = -321.79,
						y = -35.19
					}
				},
				children = {}
			},
			{
				name = "mScoreLabel",
				cType = "Label",
				params = {
					fontSize = 24,
					text = "0",
					color = {
						g = 167,
						r = 92,
						b = 187
					},
					outlineColor = {
						g = 37,
						r = 37,
						b = 37
					},
					pos = {
						x = -283.21,
						y = -34.73
					}
				},
				children = {}
			},
			{
				name = "mBaitIcon",
				cType = "Sprite",
				params = {
					image = "jhqy_dy_2.png",
					pos = {
						x = -87.93,
						y = -34.07
					}
				},
				children = {}
			},
			{
				name = "mBaitCountLabel",
				cType = "Label",
				params = {
					fontSize = 24,
					text = "0",
					color = {
						g = 255,
						r = 255,
						b = 255
					},
					outlineColor = {
						g = 37,
						r = 37,
						b = 37
					},
					pos = {
						x = -51.96,
						y = -35.82
					}
				},
				children = {}
			},
			{
				name = "mScoreGoldLabel",
				cType = "Label",
				params = {
					fontSize = 24,
					emptyInit = true,
					text = "+0",
					color = {
						g = 199,
						r = 223,
						b = 42
					},
					outlineColor = {
						g = 37,
						r = 37,
						b = 37
					},
					pos = {
						x = -240.91,
						y = -35.25
					}
				},
				children = {}
			},
			{
				name = "mBoxIcon",
				cType = "Sprite",
				params = {
					image = "jhqy_dy_13.png",
					pos = {
						x = -180.69,
						y = -34.33
					}
				},
				children = {}
			},
			{
				name = "mBoxLabel",
				cType = "Label",
				params = {
					fontSize = 24,
					text = "0",
					color = {
						g = 168,
						r = 139,
						b = 87
					},
					outlineColor = {
						g = 37,
						r = 37,
						b = 37
					},
					pos = {
						x = -143.13,
						y = -35.9
					}
				},
				children = {}
			}
		}
	}
}
slot1 = {
	50,
	100,
	200,
	300,
	400,
	450
}
slot2 = {
	1,
	2,
	3
}
slot3 = {
	-54,
	-100,
	-200,
	-300,
	-348
}
slot4 = {
	1,
	2,
	3,
	4,
	5
}
slot0.ctor = function (slot0, slot1)
	slot0.mMoveDir = 1
	slot0.mMoveDirFish = -1
	slot0.mTouchEnabled = false
	slot0.mStart = false
	slot0.mFishPool = {}
	slot3 = 0

	for slot7, slot8 in ipairs(slot2) do
		table.insert(slot0.mFishPool, tonumber(slot8))

		slot3 = slot3 + tonumber(slot8)
	end

	slot0.mBaitCount = slot3
	slot0.mScore = 0
	slot0.mScoreGold = 0
	slot0.mScoreBox = 0
	slot0.mGetting = false
	slot0.mGotGoldFish = false
	slot0.mDropList = {}

	slot0.super.ctor(slot0)
	slot0.initUI(slot0)

	return 
end
slot0.initUI = function (slot0)
	slot0.createUITree(slot0)
	slot0.mGetFish:setVisible(false)
	slot0.mBaitCountLabel:setString(slot0.mBaitCount)
	slot0.mScoreLabel:setString(slot0.mScore)
	slot0.mBoxLabel:setString(slot0.mScoreBox)

	if 0 < slot0.mBaitCount then
		slot0.playAnim(slot0, slot0.mHookSprite)
	else
		ui.showFlashView(TR("没有鱼饵"))

		return 
	end

	ui.addTouchEvent({
		node = slot0.mNode,
		beganEvent = function (slot0, slot1)
			if not slot0.mStart then
				slot0.mStart = true

				slot0.mPole:playAnimation("diaoyu_shuaigan", 1)
				Utility.performWithDelay(slot0, function ()
					MqAudio.playEffect("diaoyuqigan.mp3")

					return 
				end, 1)
				slot0.mHookSprite:stopAllActions()
				slot0.mHookSprite:setVisible(false)
				slot0.mPole:registerLuaHandler("complete", function ()
					slot0:costBait()

					slot0.costBait.mTouchEnabled = true

					slot0.costBait:startFishing()
					slot0.costBait.startFishing:startMoving()

					slot0.costBait.startFishing.startMoving.mIndex = slot0:randomFish()

					slot0.costBait.startFishing.startMoving:startFishMoving()
					slot0.costBait.startFishing.startMoving.startFishMoving.mPole:playAnimation("diaoyu_daiji")
					slot0.costBait.startFishing.startMoving.startFishMoving.mPole.playAnimation.mPole:registerLuaHandler("complete", function ()
						return 
					end)

					return 
				end)

				return false
			end

			if slot0.mTouchEnabled then
				slot0.mNode.BeganPos = slot0.getLocation(slot0)

				slot0:onBeganEvent(slot0.mNode:convertToNodeSpace(slot0.getLocation(slot0)))

				return true
			else
				return false
			end

			return 
		end,
		movedEvent = function (slot0, slot1)
			slot0:onMovedEvent(slot0.mNode:convertToNodeSpace(slot0.getLocation(slot0)))

			return 
		end,
		endedEvent = function (slot0, slot1)
			slot2 = slot0.mNode:convertToNodeSpace(slot0.getLocation(slot0))

			if ui.isTouchNodeClicked(slot0.mNode.BeganPos, slot0.getLocation(slot0)) then
				if math.abs(slot0.mCircle:getParent():convertToNodeSpace(slot3).x - slot0.mCircle:getPositionX()) < 40 then
					slot0.mGetting = true
					slot5 = UIWrap.newControl("Sprite", {
						image = (slot0.mIndex == 3 and "jhqy_dy_12.png") or "jhqy_dy_7.png",
						pos = cc.p(slot0.mFish:getPosition())
					})

					slot0.mFishLine:addChild(slot5)
					slot5.runAction(slot5, cc.Sequence:create(cc.Spawn:create(cc.RotateBy:create(0.5, 60), cc.MoveBy:create(0.5, cc.p(0, 100)), cc.FadeOut:create(0.5)), cc.RemoveSelf:create()))
					slot0.mGetFish:stopAllActions()
					slot0.mGetFish:runAction(cc.Spawn:create(cc.MoveBy:create(0.1, cc.p(0, -20)), cc.FadeOut:create(0.2)))
					Utility.performWithDelay(slot0, function ()
						MqAudio.playEffect("yuchushui.mp3")

						return 
					end, 1.5)
					slot0.mPole:setSkin(({
						"putongyu",
						"jinlongyu",
						"baoxiang"
					})[slot0.mIndex])
					slot0.mPole:playAnimation("diaoyu_youyu", 1)
					slot0:stopAllSchedule()

					slot0.mTouchEnabled = false

					Utility.performWithDelay(slot0.mPole, function ()
						slot2 = (slot0.mIndex ~= 3 or slot0.mBoxIcon) and slot0.mScoreIcon.mFishFly:getParent():convertToNodeSpace(slot1)
						slot3 = nil

						if (slot0.mIndex ~= 3 or slot0.mBoxIcon) and slot0.mScoreIcon.mIndex == 3 then
							slot3 = UIWrap.newControl("Sprite", {
								image = "jhqy_dy_12.png"
							})
						else
							UIWrap.newControl("Effect", {
								loop = false,
								animation = "diaoyu_youyu2",
								isPlayAnimation = true,
								dataFile = "effect_ui_diaoyu",
								skin = slot1[slot0.mIndex],
								pos = cc.p(slot0.mPole:getPosition())
							}):setTimePercent(1)
						end

						slot0.mFishFly:getParent():addChild(slot3)
						slot3.runAction(slot3, cc.Sequence:create(cc.Spawn:create(cc.MoveTo:create(1, slot2), cc.RotateBy:create(1, 360), cc.FadeOut:create(1)), cc.CallFunc:create(function ()
							slot0:gainFish(slot0.mIndex)

							return 
						end), cc.RemoveSelf:create()))

						if slot0.mIndex == 3 then
							slot0.mScoreBox = slot0.mScoreBox + 1
						elseif slot0.mIndex == 2 then
							slot0.mScoreGold = slot0.mScoreGold + 1
						elseif slot0.mIndex == 1 then
							slot0.mScore = slot0.mScore + 1
						end

						slot0.mPole:setTimeScale(0)

						if 0 < slot0.mBaitCount then
							slot0.mPole:setTimeScale(1)
							slot0.mPole:playAnimation("diaoyu_shuaigan", 1)
							Utility.performWithDelay(slot0, function ()
								MqAudio.playEffect("diaoyuqigan.mp3")

								return 
							end, 1)
							slot0.mPole:registerLuaHandler("complete", function ()
								slot0:costBait()

								slot0.costBait.mTouchEnabled = true

								slot0.costBait:startFishing()

								slot0.costBait.startFishing.mGetting = false

								slot0.costBait.startFishing:restartMoving()

								slot0.costBait.startFishing.restartMoving.mIndex = slot0:randomFish()

								slot0.costBait.startFishing.restartMoving:startFishMoving()
								slot0.costBait.startFishing.restartMoving.startFishMoving.mPole:playAnimation("diaoyu_daiji")
								slot0.costBait.startFishing.restartMoving.startFishMoving.mPole.playAnimation.mPole:registerLuaHandler("complete", function ()
									return 
								end)

								return 
							end)
						else
							slot0.mFinish = true

							slot0.mPole:setVisible(false)
							slot0:stopAllSchedule()

							slot0.mTouchEnabled = false

							ui.showFlashView(TR("没有鱼饵"))
						end

						slot0:requesetGetReward(slot0.mIndex, slot0.mFinish == true)

						return 
					end, 1.6666666666666667)
				else
					slot0.mGetFish:stopAllActions()
					slot0.mGetFish:setVisible(false)
					slot0.mPole:setSkin(({
						"putongyu",
						"jinlongyu",
						"baoxiang"
					})[slot0.mIndex])
					slot0.mPole:playAnimation("diaoyu_wuyu", 1)
					slot0:stopAllSchedule()

					slot0.mTouchEnabled = false

					Utility.performWithDelay(slot0.mPole, function ()
						slot0.mPole:setTimeScale(0)

						if 0 < slot0.mPole.setTimeScale.mBaitCount then
							if slot0.mIndex == 3 then
								ui.showFlashView(TR("什么都没有"))
							else
								ui.showFlashView(TR("鱼在奋力挣脱后游走了"))
							end

							slot0.mPole:setTimeScale(1)
							slot0.mPole.setTimeScale.mPole:playAnimation("diaoyu_shuaigan", 1)
							Utility.performWithDelay(Utility.performWithDelay, function ()
								MqAudio.playEffect("diaoyuqigan.mp3")

								return 
							end, 1)
							Utility.performWithDelay.mPole:registerLuaHandler("complete", function ()
								slot0:costBait()

								slot0.costBait.mTouchEnabled = true

								slot0.costBait:startFishing()

								slot0.costBait.startFishing.mGetting = false

								slot0.costBait.startFishing:restartMoving()

								slot0.costBait.startFishing.restartMoving.mIndex = slot0:randomFish()

								slot0.costBait.startFishing.restartMoving:startFishMoving()
								slot0.costBait.startFishing.restartMoving.startFishMoving.mPole:playAnimation("diaoyu_daiji")
								slot0.costBait.startFishing.restartMoving.startFishMoving.mPole.playAnimation.mPole:registerLuaHandler("complete", function ()
									return 
								end)

								return 
							end)
						else
							slot0.mFinish = true

							slot0.mPole:setVisible(false)
							slot0.mPole.setVisible:stopAllSchedule()

							slot0.mPole.setVisible.stopAllSchedule.mTouchEnabled = false

							ui.showFlashView(TR("没有鱼饵"))
						end

						slot0(slot0, 0, slot0.mFinish == true)

						return 
					end, 3.6666666666666665)
				end
			end

			slot0:onEndedEvent(slot2)

			return 
		end
	})

	return 
end
slot0.randomFish = function (slot0)
	slot1 = 0

	for slot5, slot6 in pairs(slot0.mFishPool) do
		if slot6 == 0 then
			slot1 = slot1 + 1
		end
	end

	if slot1 == #slot0.mFishPool then
		return -1
	end

	slot2 = math.random(#slot0.mFishPool)

	while slot0.mFishPool[slot2] <= 0 do
		slot2 = math.random(#slot0.mFishPool)
	end

	slot0.mFishPool[slot2] = slot0.mFishPool[slot2] - 1

	if slot2 == 3 then
		MqAudio.playEffect("shenmibaoxiao.mp3")
		slot0.mNode:addChild(UIWrap.newControl("Effect", {
			loop = false,
			animation = "animation",
			isPlayAnimation = true,
			autoDelete = true,
			dataFile = "effect_ui_shenmibaoxiang"
		}))
	end

	return slot2
end
slot0.gainFish = function (slot0, slot1)
	if slot1 == 3 then
		slot0.mBoxLabel:setString(slot0.mScoreBox)
		slot0.mBoxLabel:stopAllActions()
		slot0.mBoxLabel:setScale(1)
		slot0.mBoxLabel:runAction(cc.Sequence:create(cc.ScaleTo:create(0.5, 2), cc.ScaleTo:create(0.5, 1)))
	elseif slot1 == 2 then
		slot0.mScoreGoldLabel:setVisible(true)
		slot0.mScoreGoldLabel:setString(string.format("+%s", slot0.mScoreGold))
		slot0.mScoreGoldLabel:stopAllActions()
		slot0.mScoreGoldLabel:setScale(1)
		slot0.mScoreGoldLabel:runAction(cc.Sequence:create(cc.ScaleTo:create(0.5, 2), cc.ScaleTo:create(0.5, 1)))
	elseif slot1 == 1 then
		slot0.mScoreLabel:setString(slot0.mScore)
		slot0.mScoreLabel:stopAllActions()
		slot0.mScoreLabel:setScale(1)
		slot0.mScoreLabel:runAction(cc.Sequence:create(cc.ScaleTo:create(0.5, 2), cc.ScaleTo:create(0.5, 1)))
	end

	return 
end
slot0.costBait = function (slot0)
	slot0.mBaitCount = slot0.mBaitCount - 1

	slot0.mBaitCountLabel:setString(slot0.mBaitCount)

	return 
end
slot0.playGetFishAnim = function (slot0, slot1)
	slot0.mGetFish.setVisible(slot2, true)
	slot0.mGetFish.stopAllActions(slot2)
	slot0.mGetFish.setRotation(slot2, 0)
	slot0.mGetFish:setPositionY(-132.22)

	if slot1 then
		slot2.runAction(slot2, cc.RepeatForever:create(cc.EaseSineInOut:create(cc.Sequence:create(cc.Spawn:create(cc.RotateBy:create(0.5, -1), cc.MoveBy:create(0.5, cc.p(0, 8))), cc.Spawn:create(cc.RotateBy:create(0.5, 1), cc.MoveBy:create(0.5, cc.p(0, -8))), cc.Spawn:create(cc.RotateBy:create(0.5, 1), cc.MoveBy:create(0.5, cc.p(0, -8))), cc.Spawn:create(cc.RotateBy:create(0.5, -1), cc.MoveBy:create(0.5, cc.p(0, 8)))))))
	else
		slot0.mGetFish:setOpacity(255)
		slot2.runAction(slot2, cc.RepeatForever:create(cc.Sequence:create(cc.Spawn:create(cc.RotateBy:create(2, -5), cc.MoveBy:create(2, cc.p(0, 5))), cc.Spawn:create(cc.RotateBy:create(2, 5), cc.MoveBy:create(2, cc.p(0, -5))), cc.Spawn:create(cc.RotateBy:create(2, 5), cc.MoveBy:create(2, cc.p(0, -5))), cc.Spawn:create(cc.RotateBy:create(2, -5), cc.MoveBy:create(2, cc.p(0, 5))))))
	end

	return 
end
slot0.playAnim = function (slot0, slot1)
	slot1.setVisible(slot1, true)
	slot1.stopAllActions(slot1)
	slot1.runAction(slot1, cc.RepeatForever:create(cc.Sequence:create(cc.FadeIn:create(1), cc.FadeOut:create(1))))

	return 
end
slot0.startFishing = function (slot0)
	slot0.mFish:setPositionX(slot0[math.random(#slot0)])
	slot0.mFishLine:setPositionX(slot1[math.random(#slot1)])

	return 
end
slot0.startMoving = function (slot0)
	slot0.mCircle:runAction(cc.Sequence:create(cc.MoveTo:create((slot0.mLine:getContentSize().width - slot0.mCircle:getPositionX())/slot0.mLine:getContentSize().width/slot0[math.random(#slot0)], cc.p(slot0.mLine:getContentSize().width, 0)), cc.CallFunc:create(function ()
		slot0.mMoveDir = -1

		slot0.mCircle:stopAllActions()
		slot0.mCircle:runAction(cc.RepeatForever:create(cc.Sequence:create(cc.MoveTo:create(slot1, cc.p(0, 0)), cc.CallFunc:create(function ()
			slot0.mMoveDir = 1

			return 
		end), cc.MoveTo:create(slot1, cc.p(slot0.mLine:getContentSize().width, 0)), cc.CallFunc:create(function ()
			slot0.mMoveDir = -1

			return 
		end))))

		return 
	end)))

	return 
end
slot0.startFishMoving = function (slot0)
	slot0.mFish:setTexture((slot0.mIndex == 3 and "jhqy_dy_12.png") or "jhqy_dy_7.png")
	slot0.mFish:setVisible(true)
	slot0.mFish:setScaleX(1)
	slot0.mFish:runAction(cc.Sequence:create(cc.MoveTo:create(slot0.mFish:getPositionX()/slot0.mFishLine:getContentSize().width/slot0[math.random(#slot0)], cc.p(0, 0)), cc.CallFunc:create(function ()
		slot0.mMoveDirFish = 1

		slot0.mFish:setScaleX(-1)
		slot0.mFish.setScaleX.mFish:stopAllActions()
		slot0.mFish:runAction(cc.RepeatForever:create(cc.Sequence:create(cc.MoveTo:create(slot1, cc.p(slot0.mFishLine:getContentSize().width, 0)), cc.CallFunc:create(function ()
			slot0.mMoveDirFish = -1

			slot0.mFish:setScaleX(1)

			return 
		end), cc.MoveTo:create(slot1, cc.p(0, 0)), cc.CallFunc:create(function ()
			slot0.mMoveDirFish = 1

			slot0.mFish:setScaleX(-1)

			return 
		end))))

		return 
	end)))

	return 
end
slot0.onBeganEvent = function (slot0, slot1)
	return 
end
slot0.stopAllSchedule = function (slot0)
	slot0.mFish:setVisible(false)
	slot0.mFish:stopAllActions()
	slot0.mCircle:stopAllActions()

	return 
end
slot0.restartMoving = function (slot0)
	slot1 = slot0[math.random(#slot0)]

	if slot0.mMoveDir == 1 then
		slot0.mCircle:runAction(cc.Sequence:create(cc.MoveTo:create((slot0.mLine:getContentSize().width - slot0.mCircle:getPositionX())/slot0.mLine:getContentSize().width/slot1, cc.p(slot0.mLine:getContentSize().width, 0)), cc.CallFunc:create(function ()
			slot0.mMoveDir = -1

			slot0.mCircle:stopAllActions()
			slot0.mCircle:runAction(cc.RepeatForever:create(cc.Sequence:create(cc.MoveTo:create(slot1, cc.p(0, 0)), cc.CallFunc:create(function ()
				slot0.mMoveDir = 1

				return 
			end), cc.MoveTo:create(slot1, cc.p(slot0.mLine:getContentSize().width, 0)), cc.CallFunc:create(function ()
				slot0.mMoveDir = -1

				return 
			end))))

			return 
		end)))
	else
		slot0.mCircle:runAction(cc.Sequence:create(cc.MoveTo:create(slot0.mCircle:getPositionX()/slot0.mLine:getContentSize().width/slot1, cc.p(0, 0)), cc.CallFunc:create(function ()
			slot0.mMoveDir = 1

			slot0.mCircle:stopAllActions()
			slot0.mCircle:runAction(cc.RepeatForever:create(cc.Sequence:create(cc.MoveTo:create(slot1, cc.p(slot0.mLine:getContentSize().width, 0)), cc.CallFunc:create(function ()
				slot0.mMoveDir = -1

				return 
			end), cc.MoveTo:create(slot1, cc.p(0, 0)), cc.CallFunc:create(function ()
				slot0.mMoveDir = 1

				return 
			end))))

			return 
		end)))
	end

	return 
end
slot0.onMovedEvent = function (slot0, slot1)
	return 
end
slot0.setGetFish = function (slot0, slot1)
	slot0.mGetFishShow = slot1

	slot0.playGetFishAnim(slot0, slot1)

	return 
end
slot0.onEndedEvent = function (slot0, slot1)
	return 
end
slot0.onClickClose = function (slot0)
	LayerManager.removeLayer(slot0)

	return 
end
slot0.mergeReward = function (slot0, slot1)
	slot2 = {}

	for slot6, slot7 in pairs(slot1) do
		for slot11, slot12 in pairs(slot7) do
			for slot16, slot17 in pairs(slot12) do
				table.insert(slot2, slot17)
			end
		end
	end

	slot3 = {}

	for slot7, slot8 in pairs(slot2) do
		slot9 = false

		for slot13, slot14 in pairs(slot0.mDropList) do
			if slot8.ResourceId == slot14.ResourceId then
				slot14.Num = slot14.Num + slot8.Num
				slot9 = true
			end
		end

		if not slot9 then
			table.insert(slot3, slot8)
		end
	end

	for slot7, slot8 in pairs(slot3) do
		table.insert(slot0.mDropList, slot8)
	end

	return 
end
slot0.requesetGetReward = function (slot0, slot1, slot2)
	slot0.socketRequest(slot0, {
		methodName = "GetReward",
		moduleName = "Meeting",
		methodData = {
			MeetObj.MeetType.eDiaoYu,
			slot1,
			0
		},
		successCallback = function (slot0)
			MeetObj:updateMeet(slot0.Meeting)
			PlayerAttrObj:checkLvUp()

			if slot0.BaseGetGameResourceList then
				ui.showFlashReward(slot0)
				slot0:mergeReward(slot0.BaseGetGameResourceList)
			end

			if slot1 then
				MeetObj:setTalkStatus((3 < slot0.mScoreGold*2 + slot0.mScore and MeetObj.TalkStatus.eWin) or MeetObj.TalkStatus.eLose)

				slot2 = LayerManager.addLayer({
					cleanUp = false,
					name = "meet.MeetTalkLayer",
					data = {},
					zOrder = Enums.ZOrderType.eMessageBox
				})

				Utility.performWithDelay(slot0, function ()
					ui.showMessageBox({
						zOrder = Enums.ZOrderType.ePopLayer,
						titleText = TR("提示"),
						diyUICallback = function (slot0, slot1)
							slot0.addChild(slot0, UIWrap.newControl("Label", {
								isRichText = true,
								text = TR("钓到普通鱼%s条%s%s", slot0.mScore, (0 < slot0.mScoreGold and TR("，金龙鱼%s条", slot0.mScoreGold)) or "", (0 < slot0.mScoreBox and TR("，宝箱%s个", slot0.mScoreBox)) or ""),
								size = cc.size(slot1.width - 60, slot1.height - 20),
								color = cc.c3b(55, 55, 55),
								anchor = cc.p(0.5, 0.5),
								pos = cc.p(slot1.width/2, slot1.height/2 + 80),
								align = cc.TEXT_ALIGNMENT_CENTER,
								valign = cc.VERTICAL_TEXT_ALIGNMENT_CENTER
							}))

							if next(slot0.mDropList) then
								slot3 = UIWrap.newControl("Label", {
									fontSize = 18,
									text = TR("获得奖励："),
									anchor = cc.p(0.5, 0.5),
									color = cc.c3b(55, 55, 55)
								})

								slot3.setPosition(slot3, cc.p(slot1.width/2, slot1.height/2 + 30))
								slot0.addChild(slot0, slot3)
								slot0.addChild(slot0, slot4)

								for slot8, slot9 in pairs(slot0.mDropList) do
									slot4.pushBackCustomItem(slot4, UIWrap.newControl("CardNode", {
										allowClick = true,
										scale = 0.8,
										initParams = {
											cardInfo = {
												modelId = slot9.ResourceId,
												num = slot9.Num
											},
											showAttrs = {
												Enums.CardShowAttr.eNum
											}
										}
									}))
								end

								slot4.setContentSize(slot4, cc.size(#slot0.mDropList*64 + (#slot0.mDropList - 1)*5, 64))
							end

							return 
						end,
						msgBoxParams = {
							hideCloseButton = true,
							needTouchClose = false
						},
						okCallback = function ()
							LayerManager.removeLayer(LayerManager.removeLayer)
							LayerManager.removeLayer(LayerManager.removeLayer)

							return 
						end
					})

					return 
				end, 1)
			end

			return 
		end
	})

	return 
end

return slot0
