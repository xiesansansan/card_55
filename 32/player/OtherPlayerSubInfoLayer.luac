slot0 = class("OtherPlayerSubInfoLayer", require("common.BaseLayer"), function ()
	return UIWrap.newRootLayer({
		fullScreen = false
	})
end)
slot0.uiTree = {
	{
		name = "untitled1",
		cType = "FileLayer",
		params = {
			onlyEditer = true,
			file = "player/OtherPlayerInfoLayer.lua"
		},
		children = {}
	},
	{
		name = "untitled45",
		cType = "Node",
		params = {
			posApt = 1,
			scaleApt = 2,
			pos = {
				x = 568,
				y = 320
			}
		},
		children = {
			{
				name = "untitled2",
				cType = "Node",
				params = {
					anchor = {
						x = 0.5,
						y = 0.5
					},
					pos = {
						x = 57,
						y = 0
					},
					size = {
						width = 820,
						height = 460
					}
				},
				children = {
					{
						name = "untitled3",
						cType = "Sprite",
						params = {
							image = "wjxx_1.png",
							pos = {
								x = 225,
								y = 224.3
							}
						},
						children = {}
					},
					{
						name = "untitled4",
						cType = "Sprite",
						params = {
							image = "wjxx_2.png",
							pos = {
								x = 225,
								y = 41
							}
						},
						children = {
							{
								name = "LvLabel",
								cType = "Label",
								params = {
									fontSize = 20,
									text = "",
									anchor = {
										x = 0,
										y = 0.5
									},
									color = {
										g = 37,
										r = 37,
										b = 37
									},
									pos = {
										x = 23,
										y = 70
									}
								},
								children = {}
							},
							{
								name = "GuildLabel",
								cType = "Label",
								params = {
									fontSize = 20,
									text = "",
									anchor = {
										x = 0,
										y = 0.5
									},
									color = {
										g = 37,
										r = 37,
										b = 37
									},
									pos = {
										x = 23,
										y = 47
									}
								},
								children = {}
							},
							{
								name = "FAPLabel",
								cType = "Label",
								params = {
									fontSize = 20,
									text = "",
									anchor = {
										x = 0,
										y = 0.5
									},
									color = {
										g = 37,
										r = 37,
										b = 37
									},
									pos = {
										x = 23,
										y = 22
									}
								},
								children = {}
							},
							{
								name = "FAPRankLabel",
								cType = "Label",
								params = {
									fontSize = 20,
									text = "",
									anchor = {
										x = 0,
										y = 0.5
									},
									color = {
										g = 37,
										r = 37,
										b = 37
									},
									pos = {
										x = 200,
										y = 72
									}
								},
								children = {}
							},
							{
								name = "DwdhRankLabel",
								cType = "Label",
								params = {
									fontSize = 20,
									text = "",
									anchor = {
										x = 0,
										y = 0.5
									},
									color = {
										g = 37,
										r = 37,
										b = 37
									},
									pos = {
										x = 200,
										y = 47
									}
								},
								children = {}
							},
							{
								name = "PvpRankLaebl",
								cType = "Label",
								params = {
									fontSize = 20,
									text = "",
									anchor = {
										x = 0,
										y = 0.5
									},
									color = {
										g = 37,
										r = 37,
										b = 37
									},
									pos = {
										x = 200,
										y = 22
									}
								},
								children = {}
							}
						}
					},
					{
						name = "infoNode",
						cType = "Node",
						params = {
							pos = {
								x = 225,
								y = 250
							}
						},
						children = {
							{
								name = "FuntionBtnTemplate",
								cType = "TemplateNode",
								custom = {
									{
										value = "untitled55-image",
										name = "icon",
										type = "string"
									},
									{
										value = "untitled53-hide",
										name = "hideStar",
										type = "string"
									}
								},
								params = {
									pos = {
										x = 368.17,
										y = 111.55
									}
								},
								children = {
									{
										name = "untitled55",
										cType = "Button",
										params = {
											childName = "bgSprite",
											scale = 0.85,
											pressedAction = false,
											image = "tb_gn_53.png",
											pos = {
												x = 0,
												y = 0
											}
										},
										children = {}
									},
									{
										name = "untitled51",
										cType = "Scale9Sprite",
										params = {
											image = "c_93.png",
											pos = {
												x = 0,
												y = -44
											},
											size = {
												width = 66,
												height = 22
											}
										},
										children = {}
									},
									{
										name = "untitled52",
										cType = "Label",
										params = {
											fontSize = 22,
											childName = "lvLabel",
											text = "9",
											pos = {
												x = 0,
												y = -44
											}
										},
										children = {}
									},
									{
										name = "untitled53",
										cType = "Sprite",
										params = {
											childName = "starSprite",
											scale = 0.8,
											hide = true,
											image = "c_5.png",
											pos = {
												x = 30,
												y = -44
											}
										},
										children = {}
									}
								}
							},
							{
								name = "functionNode",
								cType = "Node",
								params = {
									pos = {
										x = 0,
										y = 0
									}
								},
								children = {}
							},
							{
								name = "heroSprite",
								cType = "Sprite",
								params = {
									scale = 0.5,
									image = "lh_11304.png",
									pos = {
										x = 0,
										y = 10
									}
								},
								children = {}
							},
							{
								name = "nameLabel",
								cType = "Label",
								params = {
									fontSize = 32,
									color = {
										g = 37,
										r = 37,
										b = 37
									},
									pos = {
										x = 0,
										y = 190
									},
									text = TR("名字")
								},
								children = {}
							}
						}
					},
					{
						name = "untitled5",
						cType = "Sprite",
						params = {
							image = "bb_12.png",
							pos = {
								x = 473.65,
								y = 226.35
							}
						},
						children = {}
					},
					{
						name = "untitled11",
						cType = "Scale9Sprite",
						params = {
							image = "c_36.png",
							pos = {
								x = 550,
								y = 440
							},
							size = {
								width = 108,
								height = 7
							}
						},
						children = {}
					},
					{
						name = "untitled12",
						cType = "Scale9Sprite",
						params = {
							scale = -1,
							image = "c_36.png",
							pos = {
								x = 774,
								y = 440
							},
							size = {
								width = 108,
								height = 7
							}
						},
						children = {}
					},
					{
						name = "untitled9",
						cType = "Label",
						params = {
							color = {
								g = 37,
								r = 37,
								b = 37
							},
							pos = {
								x = 662.49,
								y = 440
							},
							text = TR("最强侠客")
						},
						children = {}
					},
					{
						name = "mHeroTableView",
						cType = "TableView",
						params = {
							numOfCellsFunc = "cbNumOfCellsFunc",
							isVertical = true,
							cellUpdateFunc = "cbCellUpdateFunc",
							cellSizeFunc = "cbCellSizeFunc",
							cellFillFunc = "cbCellFillFunc",
							pos = {
								x = 496.77,
								y = 8.2
							},
							size = {
								width = 320,
								height = 410
							}
						},
						children = {
							{
								name = "mHeroTemplate",
								cType = "TemplateNode",
								params = {
									pos = {
										x = 0,
										y = 0
									},
									size = {
										width = 320,
										height = 120
									}
								},
								children = {
									{
										name = "mCardTemplate",
										cType = "TemplateNode",
										custom = {
											{
												value = "untitled15-initParams",
												name = "initParams",
												type = "string"
											}
										},
										params = {
											anchor = {
												x = 0.5,
												y = 0.5
											},
											pos = {
												x = 50,
												y = 70
											},
											size = {
												width = 100,
												height = 120
											}
										},
										children = {
											{
												name = "untitled15",
												cType = "CardNode",
												params = {
													childName = "card",
													allowClick = true,
													initParams = {},
													pos = {
														x = 50,
														y = 70
													}
												},
												children = {}
											},
											{
												name = "untitled16",
												cType = "Label",
												params = {
													fontSize = 18,
													childName = "nameLabel",
													text = "name",
													color = {
														g = 65,
														r = 192,
														b = 65
													},
													pos = {
														x = 50,
														y = 16
													}
												},
												children = {}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
slot0.ctor = function (slot0, slot1)
	slot0.data = slot1.data or {}
	slot0.heroNodeList = {}

	slot0.super.ctor(slot0)
	slot0.initUI(slot0)

	return 
end
slot0.initUI = function (slot0)
	slot0.createUITree(slot0)
	slot0.refreshLayer(slot0)

	return 
end
slot0.refreshLayer = function (slot0)
	slot0.mHeroTableView:reloadData()
	slot0.createHeroInfo(slot0)

	return 
end
slot0.createHeroInfo = function (slot0)
	slot0.LvLabel:setString(string.format("等级:%s", slot0.data.Lv or 0))
	slot0.FAPRankLabel:setString(string.format("最强战力排名:%s", slot0.data.FAPRank))
	slot0.GuildLabel:setString(string.format("官职:%s", (not Utility.isEntityId(slot0.data.GuildId) and TR("无")) or (slot0.data.PositionId == 0 and TR("帮众")) or GuildPositionRelation.items[1][slot0.data.PositionId].positionName))
	slot0.DwdhRankLabel:setString(string.format("试刀大会排名:%s", (slot0.data.DwdhRank and TR("第%s名", slot0.data.DwdhRank)) or TR("无")))
	slot0.FAPLabel:setString(string.format("最强战力:%s", Utility.numberWithUnit(slot0.data.Fap or 0)))
	slot0.PvpRankLaebl:setString(string.format("擂台比武排名:%s", (slot0.data.PvpRank and TR("%s名", slot0.data.PvpRank)) or TR("无")))
	slot0.heroSprite:setTexture(FashionModel.items[(slot0.data.FashionModelId ~= 0 and slot0.data.FashionModelId) or 19010000].pic .. ".png")
	slot0.nameLabel:setString(slot0.data.Name)
	slot0.functionNode:removeAllChildren()

	slot3 = 2
	slot4 = math.ceil(#{
		{
			icon = "tb_gn_50.png",
			needStar = false,
			viewCallBack = function (slot0)
				slot1 = {}
				slot2 = 0

				for slot6, slot7 in pairs(TreasureModel.items) do
					table.insert(slot1, slot7)
				end

				table.sort(slot1, function (slot0, slot1)
					if slot0.modelId ~= slot1.modelId then
						return slot0.modelId < slot1.modelId
					end

					return 
				end)

				for slot6, slot7 in ipairs(slot1) do
					if slot0.data.TreasureModelId and slot0.data.TreasureModelId == slot7.modelId then
						slot2 = slot6
					end
				end

				if not slot0.data.TreasureModelId or slot0.data.TreasureModelId < 0 then
					slot0.lvLabel:setString(TR("未激活"))
					slot0.bgSprite:setEnabled(false)
				else
					slot0.lvLabel:setString(TR("%s级", slot2))
				end

				return 
			end
		},
		{
			icon = "tb_gn_55.png",
			needStar = true,
			viewCallBack = function (slot0)
				if slot0.data.StrongInfo then
					slot0.lvLabel:setString(tostring(slot0.data.StrongInfo.YitianjianLv or 0))
				else
					slot0.lvLabel:setString(TR("未激活"))
					slot0.bgSprite:setEnabled(false)
				end

				return 
			end
		},
		{
			icon = "tb_gn_54.png",
			needStar = false,
			viewCallBack = function (slot0)
				if slot0.data.Fashion and next(slot0.data.Fashion) and 0 < slot0.data.Fashion.Level then
					slot0.lvLabel:setString(TR("%s阶", slot0.data.Fashion.Level))
				else
					slot0.lvLabel:setString(TR("未激活"))
					slot0.bgSprite:setEnabled(false)
				end

				return 
			end
		},
		{
			icon = "tb_gn_53.png",
			needStar = true,
			viewCallBack = function (slot0)
				if slot0.data.DrumInfo and slot0.data.DrumInfo.1 then
					slot0.lvLabel:setString(tostring(slot0.data.DrumInfo.1.StarLv))
				else
					slot0.lvLabel:setString(TR("未激活"))
					slot0.bgSprite:setEnabled(false)
				end

				return 
			end
		}
	}/2)
	slot5 = 95
	slot6 = 130
	slot7 = -170
	slot8 = 170

	for slot12, slot13 in ipairs(slot2) do
		slot0.createLayoutTemplateNode(slot0, "FuntionBtnTemplate", {
			icon = slot13.icon,
			hideStar = not slot13.needStar
		}):setPosition(cc.p((((slot4 < slot12 and 2) or 1) == 1 and slot7) or slot8, slot6 - slot5*(((slot4 < slot12 and slot12 - slot4) or slot12) - 1)))
		slot13.viewCallBack(slot16)
		slot0.functionNode:addChild(slot16)
	end

	return 
end
slot0.cbCellSizeFunc = function (slot0, slot1, slot2)
	return 320, 120
end
slot0.cbNumOfCellsFunc = function (slot0, slot1)
	return math.ceil(#slot0.data.Hero/3)
end
slot0.cbCellFillFunc = function (slot0, slot1, slot2)
	slot3 = slot0.createLayoutTemplateNode(slot0, "mHeroTemplate")
	slot3.refresh = function (slot0, slot1)
		for slot5 = 1, 3, 1 do
			slot7 = slot0.data.Hero[slot1*3 + slot5]

			if not slot0.heroNodeList[slot1*3 + slot5] or tolua.isnull(slot8) then
				slot0:createLayoutTemplateNode("mCardTemplate").setPosition(slot8, cc.p((slot5 - 1)*110 + 50, 70))
				slot1:addChild(slot0.createLayoutTemplateNode("mCardTemplate"))
			end

			if not slot7 then
				slot8.setVisible(slot8, false)

				return 
			end

			slot8.setVisible(slot8, true)
			slot8.card:setCardData({
				modelId = slot7.ModelId
			}, {
				Enums.CardShowAttr.eBorder,
				Enums.CardShowAttr.eLevel,
				Enums.CardShowAttr.eTrainLv,
				Enums.CardShowAttr.eStar
			}, slot7)
			slot8.card:setClickAction(function ()
				LayerManager.addLayer({
					cleanUp = false,
					name = "hero.HeroDetialViewLayer",
					data = {
						isSelf = false,
						heroModelId = slot0.ModelId,
						heroInfo = slot0,
						kongfuInfo = slot1.data.KonfuInfo
					},
					zOrder = Enums.ZOrderType.ePopLayer
				})

				return 
			end)
			slot8.card:setRightTextVisible(false)
			slot8.nameLabel:setString(HeroModel.items[slot7.ModelId].name)

			slot13, slot10 = Utility.getColorValue(HeroTrainColorlvRelation.items[slot7.TrainLv].colorLv)

			slot8.nameLabel:setColor(slot9)
		end

		return 
	end

	slot1.addChild(slot1, slot3)
	slot3.refresh(slot3, slot2)

	slot1.heroNode = slot3

	return 
end
slot0.cbCellUpdateFunc = function (slot0, slot1, slot2)
	slot1.heroNode:refresh(slot2)

	return 
end

return slot0
